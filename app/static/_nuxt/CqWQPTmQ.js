import{e as h,aa as G,ac as J,x as P,ab as Q,r as m,k as t,j as w,f as v,o as c,w as u,m as C,P as I,I as T,av as j,b as f,ah as Y,b6 as S,aj as W,E as D,ae as M,af as R,ak as Z,l as ee,a4 as te,n as se,ai as oe,a6 as ae,am as le,an as N,p as K,q as V,D as x,ap as ne,ax as re,d as k,t as E,c as $,a as _,h as H,S as ue,T as ie,X as de,a1 as ce,V as pe,$ as fe,g as me,_ as ve}from"#entry";import{_ as ge}from"./DuMeszsS.js";import{b as L,F as _e,a as ye,u as be}from"./CvhSEr8e.js";import{_ as xe}from"./xOOW2sXF.js";import{u as he}from"./BBgon4y0.js";const[q,De]=G("DialogRoot");var Ce=h({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(a,{emit:n}){const e=a,s=J(e,"open",n,{defaultValue:e.defaultOpen,passive:e.open===void 0}),p=P(),o=P(),{modal:r}=Q(e);return De({open:s,modal:r,openModal:()=>{s.value=!0},onOpenChange:i=>{s.value=i},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:p,contentElement:o}),(i,d)=>m(i.$slots,"default",{open:t(s),close:()=>s.value=!1})}}),we=Ce,qe=h({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const n=a;w();const e=q();return(l,s)=>(c(),v(t(I),C(n,{type:l.as==="button"?"button":void 0,onClick:s[0]||(s[0]=p=>t(e).onOpenChange(!1))}),{default:u(()=>[m(l.$slots,"default")]),_:3},16,["type"]))}}),Be=qe;function Oe(a){return a?"open":"closed"}var ke=h({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:n}){const e=a,l=n,s=q(),{forwardRef:p,currentElement:o}=w();return s.titleId||=L(void 0,"reka-dialog-title"),s.descriptionId||=L(void 0,"reka-dialog-description"),T(()=>{s.contentElement=o,j()!==document.body&&(s.triggerElement.value=j())}),(r,i)=>(c(),v(t(_e),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:i[5]||(i[5]=d=>l("openAutoFocus",d)),onUnmountAutoFocus:i[6]||(i[6]=d=>l("closeAutoFocus",d))},{default:u(()=>[f(t(Y),C({id:t(s).contentId,ref:t(p),as:r.as,"as-child":r.asChild,"disable-outside-pointer-events":r.disableOutsidePointerEvents,role:"dialog","aria-describedby":t(s).descriptionId,"aria-labelledby":t(s).titleId,"data-state":t(Oe)(t(s).open.value)},r.$attrs,{onDismiss:i[0]||(i[0]=d=>t(s).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=d=>l("escapeKeyDown",d)),onFocusOutside:i[2]||(i[2]=d=>l("focusOutside",d)),onInteractOutside:i[3]||(i[3]=d=>l("interactOutside",d)),onPointerDownOutside:i[4]||(i[4]=d=>l("pointerDownOutside",d))}),{default:u(()=>[m(r.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),X=ke,$e=h({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:n}){const e=a,l=n,s=q(),p=S(l),{forwardRef:o,currentElement:r}=w();return ye(r),(i,d)=>(c(),v(X,C({...e,...t(p)},{ref:t(o),"trap-focus":t(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:d[0]||(d[0]=g=>{g.defaultPrevented||(g.preventDefault(),t(s).triggerElement.value?.focus())}),onPointerDownOutside:d[1]||(d[1]=g=>{const y=g.detail.originalEvent,b=y.button===0&&y.ctrlKey===!0;(y.button===2||b)&&g.preventDefault()}),onFocusOutside:d[2]||(d[2]=g=>{g.preventDefault()})}),{default:u(()=>[m(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),Pe=$e,Ee=h({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:n}){const e=a,s=S(n);w();const p=q(),o=P(!1),r=P(!1);return(i,d)=>(c(),v(X,C({...e,...t(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=g=>{g.defaultPrevented||(o.value||t(p).triggerElement.value?.focus(),g.preventDefault()),o.value=!1,r.value=!1}),onInteractOutside:d[1]||(d[1]=g=>{g.defaultPrevented||(o.value=!0,g.detail.originalEvent.type==="pointerdown"&&(r.value=!0));const y=g.target;t(p).triggerElement.value?.contains(y)&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&r.value&&g.preventDefault()})}),{default:u(()=>[m(i.$slots,"default")]),_:3},16))}}),Ie=Ee,Ae=h({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:n}){const e=a,l=n,s=q(),p=S(l),{forwardRef:o}=w();return(r,i)=>(c(),v(t(W),{present:r.forceMount||t(s).open.value},{default:u(()=>[t(s).modal.value?(c(),v(Pe,C({key:0,ref:t(o)},{...e,...t(p),...r.$attrs}),{default:u(()=>[m(r.$slots,"default")]),_:3},16)):(c(),v(Ie,C({key:1,ref:t(o)},{...e,...t(p),...r.$attrs}),{default:u(()=>[m(r.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Fe=Ae,Me=h({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(a){const n=a;w();const e=q();return(l,s)=>(c(),v(t(I),C(n,{id:t(e).descriptionId}),{default:u(()=>[m(l.$slots,"default")]),_:3},16,["id"]))}}),U=Me,Re=h({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const n=q();return be(!0),w(),(e,l)=>(c(),v(t(I),{as:e.as,"as-child":e.asChild,"data-state":t(n).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:u(()=>[m(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Le=Re,Te=h({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const n=q(),{forwardRef:e}=w();return(l,s)=>t(n)?.modal.value?(c(),v(t(W),{key:0,present:l.forceMount||t(n).open.value},{default:u(()=>[f(Le,C(l.$attrs,{ref:t(e),as:l.as,"as-child":l.asChild}),{default:u(()=>[m(l.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):D("v-if",!0)}}),Se=Te,je=h({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(a){const n=a;return(e,l)=>(c(),v(t(Z),M(R(n)),{default:u(()=>[m(e.$slots,"default")]),_:3},16))}}),Ne=je,Ke=h({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(a){const n=a,e=q();return w(),(l,s)=>(c(),v(t(I),C(n,{id:t(e).titleId}),{default:u(()=>[m(l.$slots,"default")]),_:3},16,["id"]))}}),z=Ke,Ve=h({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const n=a,e=q(),{forwardRef:l,currentElement:s}=w();return e.contentId||=L(void 0,"reka-dialog-content"),T(()=>{e.triggerElement.value=s.value}),(p,o)=>(c(),v(t(I),C(n,{ref:t(l),type:p.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":t(e).open.value||!1,"aria-controls":t(e).open.value?t(e).contentId:void 0,"data-state":t(e).open.value?"open":"closed",onClick:t(e).onOpenToggle}),{default:u(()=>[m(p.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),Ue=Ve;const ze={slots:{overlay:"fixed inset-0 bg-elevated/75",content:"fixed bg-default divide-y divide-default flex flex-col focus:outline-none",header:"flex items-center gap-1.5 p-4 sm:px-6 min-h-16",wrapper:"",body:"flex-1 overflow-y-auto p-4 sm:p-6",footer:"flex items-center gap-1.5 p-4 sm:px-6",title:"text-highlighted font-semibold",description:"mt-1 text-muted text-sm",close:"absolute top-4 end-4"},variants:{transition:{true:{overlay:"data-[state=open]:animate-[fade-in_200ms_ease-out] data-[state=closed]:animate-[fade-out_200ms_ease-in]",content:"data-[state=open]:animate-[scale-in_200ms_ease-out] data-[state=closed]:animate-[scale-out_200ms_ease-in]"}},fullscreen:{true:{content:"inset-0"},false:{content:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100vw-2rem)] max-w-lg max-h-[calc(100dvh-2rem)] sm:max-h-[calc(100dvh-4rem)] rounded-lg shadow-lg ring ring-default overflow-hidden"}}}},We={__name:"UModal",props:{title:{type:String,required:!1},description:{type:String,required:!1},content:{type:Object,required:!1},overlay:{type:Boolean,required:!1,default:!0},transition:{type:Boolean,required:!1,default:!0},fullscreen:{type:Boolean,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:[String,Object],required:!1},dismissible:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["after:leave","after:enter","close:prevent","update:open"],setup(a,{emit:n}){const e=a,l=n,s=ee(),{t:p}=te(),o=se(),r=oe(ae(e,"open","defaultOpen","modal"),l),i=le(N(()=>e.portal)),d=N(()=>e.content),g=K(()=>{const b={closeAutoFocus:B=>B.preventDefault()};return e.dismissible?b:["pointerDownOutside","interactOutside","escapeKeyDown"].reduce((A,O)=>(A[O]=F=>{F.preventDefault(),l("close:prevent")},A),b)}),y=K(()=>V({extend:V(ze),...o.ui?.modal||{}})({transition:e.transition,fullscreen:e.fullscreen}));return(b,B)=>(c(),v(t(we),M(R(t(r))),{default:u(({open:A,close:O})=>[s.default?(c(),v(t(Ue),{key:0,"as-child":"",class:x(e.class)},{default:u(()=>[m(b.$slots,"default",{open:A})]),_:2},1032,["class"])):D("",!0),f(t(Ne),M(R(t(i))),{default:u(()=>[a.overlay?(c(),v(t(Se),{key:0,class:x(y.value.overlay({class:e.ui?.overlay}))},null,8,["class"])):D("",!0),f(t(Fe),C({class:y.value.content({class:[!s.default&&e.class,e.ui?.content]})},d.value,{onAfterEnter:B[0]||(B[0]=F=>l("after:enter")),onAfterLeave:B[1]||(B[1]=F=>l("after:leave"))},ne(g.value)),{default:u(()=>[s.content&&(a.title||s.title||a.description||s.description)?(c(),v(t(re),{key:0},{default:u(()=>[a.title||s.title?(c(),v(t(z),{key:0},{default:u(()=>[m(b.$slots,"title",{},()=>[k(E(a.title),1)])]),_:3})):D("",!0),a.description||s.description?(c(),v(t(U),{key:1},{default:u(()=>[m(b.$slots,"description",{},()=>[k(E(a.description),1)])]),_:3})):D("",!0)]),_:3})):D("",!0),m(b.$slots,"content",{close:O},()=>[s.header||a.title||s.title||a.description||s.description||e.close||s.close?(c(),$("div",{key:0,class:x(y.value.header({class:e.ui?.header}))},[m(b.$slots,"header",{close:O},()=>[_("div",{class:x(y.value.wrapper({class:e.ui?.wrapper}))},[a.title||s.title?(c(),v(t(z),{key:0,class:x(y.value.title({class:e.ui?.title}))},{default:u(()=>[m(b.$slots,"title",{},()=>[k(E(a.title),1)])]),_:3},8,["class"])):D("",!0),a.description||s.description?(c(),v(t(U),{key:1,class:x(y.value.description({class:e.ui?.description}))},{default:u(()=>[m(b.$slots,"description",{},()=>[k(E(a.description),1)])]),_:3},8,["class"])):D("",!0)],2),m(b.$slots,"actions"),e.close||s.close?(c(),v(t(Be),{key:0,"as-child":""},{default:u(()=>[m(b.$slots,"close",{close:O,ui:y.value},()=>[e.close?(c(),v(H,C({key:0,icon:a.closeIcon||t(o).ui.icons.close,color:"neutral",variant:"ghost","aria-label":t(p)("modal.close")},typeof e.close=="object"?e.close:{},{class:y.value.close({class:e.ui?.close})}),null,16,["icon","aria-label","class"])):D("",!0)])]),_:2},1024)):D("",!0)])],2)):D("",!0),s.body?(c(),$("div",{key:1,class:x(y.value.body({class:e.ui?.body}))},[m(b.$slots,"body",{close:O})],2)):D("",!0),s.footer?(c(),$("div",{key:2,class:x(y.value.footer({class:e.ui?.footer}))},[m(b.$slots,"footer",{close:O})],2)):D("",!0)])]),_:2},1040,["class"])]),_:2},1040)]),_:3},16))}},He={class:"flex flex-col gap-1 items-center w-full h-40 p-5"},Xe={class:"flex gap-2 w-full pt-5 justify-center"},Ge=h({__name:"LogoutButton",setup(a){const n=P(!1),e=ue(),l=ie(),s=async()=>{try{const{messageTitle:p,message:o}=await l.logout();e.add({title:p,description:o,color:"success"}),pe("/login")}catch(p){e.add({title:"Login failed.",description:p.data.error,color:"error"})}};return(p,o)=>{const r=H,i=We;return c(),$(de,null,[f(r,{class:"cursor-pointer",onClick:o[0]||(o[0]=d=>n.value=!0)},{default:u(()=>[...o[4]||(o[4]=[k("Logout?",-1)])]),_:1}),f(i,{open:t(n),"onUpdate:open":o[3]||(o[3]=d=>ce(n)?n.value=d:null)},{content:u(()=>[_("div",He,[o[7]||(o[7]=_("h2",{class:"text-3xl font-semibold"},"Logout Confirmation",-1)),o[8]||(o[8]=_("h3",{class:"text-md font-semibold text-muted"},"Are you sure you want to log out?",-1)),_("div",Xe,[f(r,{size:"md",color:"error",variant:"solid",class:"cursor-pointer",onClick:o[1]||(o[1]=d=>n.value=!1)},{default:u(()=>[...o[5]||(o[5]=[k("Cancel",-1)])]),_:1}),f(r,{size:"md",color:"primary",variant:"solid",type:"submit",class:"cursor-pointer",onClick:o[2]||(o[2]=async()=>await s())},{default:u(()=>[...o[6]||(o[6]=[k("Confirm",-1)])]),_:1})])])]),_:1},8,["open"])],64)}}}),Je=Object.assign(Ge,{__name:"LogoutButton"}),Qe={class:"min-h-screen w-full flex flex-col bg-background text-base"},Ye={class:"w-full border-b border-base bg-surface"},Ze={class:"w-full flex items-center justify-between px-6 py-4"},et={class:"flex items-center gap-2 ml-8"},tt={class:"flex items-center gap-1 mr-8"},st={class:"flex items-center rounded-md px-3 py-2 gap-1.5"},ot={key:0,class:"text-xl font-semibold text-accent"},at={key:1,class:"text-xl font-semibold text-accent"},lt={class:"flex items-center rounded-md p-2 hover:bg-surface-hover hover:text-accent text-base cursor-pointer transition-colors"},nt={class:"flex-1 justify-center items-center bg-background"},pt=h({__name:"default",setup(a){const n=fe(),e=P(0),l=P(!0);T(async()=>{l.value=!0;const p=await he();e.value=p.currentWalletBalance??0,l.value=!1});const s=p=>!!(n.path===p||n.path.startsWith("/books/")&&n.query.from&&p==="/browse"&&n.query.from==="browse");return(p,o)=>{const r=me,i=ve,d=ge,g=Je,y=xe;return c(),$("div",Qe,[_("nav",Ye,[_("div",Ze,[_("div",et,[f(r,{name:"icons:logo",class:"w-9 h-9 text-accent"}),o[0]||(o[0]=_("h1",{class:"text-2xl font-semibold"},"Libris",-1))]),_("div",tt,[f(i,{to:"/dashboard",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/dashboard")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"ri:dashboard-line",class:"w-5 h-5 flex-shrink-0"}),o[1]||(o[1]=_("span",null,"Dashboard",-1))]),_:1},8,["class"]),f(i,{to:"/browse",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/browse")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"ph:magnifying-glass-bold",class:"w-5 h-5"}),o[2]||(o[2]=_("span",null,"Browse",-1))]),_:1},8,["class"]),f(i,{to:"/library",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/library")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"lucide:book-open",class:"w-5 h-5 flex-shrink-0"}),o[3]||(o[3]=_("span",null,"My Library",-1))]),_:1},8,["class"]),f(i,{to:"/rentals",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/rentals")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"ci-calendar",class:"w-5 h-5 flex-shrink-0"}),o[4]||(o[4]=_("span",null,"Rentals",-1))]),_:1},8,["class"]),f(i,{to:"/purchases",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/purchases")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"material-symbols:shopping-cart-outline-rounded",class:"w-5 h-5 flex-shrink-0"}),o[5]||(o[5]=_("span",null,"Purchases",-1))]),_:1},8,["class"]),f(i,{to:"/users/me",class:x(["flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",s("/users/me")?"bg-accent text-white":"hover:bg-surface-hover hover:text-accent text-base"])},{default:u(()=>[f(r,{name:"lucide:circle-user",class:"w-5 h-5 flex-shrink-0"}),o[6]||(o[6]=_("span",null,"Profile",-1))]),_:1},8,["class"]),_("div",st,[f(r,{name:"fluent:book-coins-20-regular",class:"w-6 h-6 text-accent"}),t(l)?(c(),$("span",ot,"-")):(c(),$("span",at,E(t(e)),1))]),_("button",lt,[f(r,{name:"mdi:bell-outline",class:"w-5 h-5"})]),f(d,{class:"hover:text-accent hover:bg-surface-hover transition-colors"}),f(g)])])]),_("main",nt,[f(y)])])}}});export{pt as default};
