import{j as v,h,o as s,_ as k,w as $,a as e,t as l,b as o,k as R,n as C,A as q,c as a,i as p,Q as B,F as y,J as w,q as T,az as U,y as I,f as A,C as N,d as S}from"#entry";import{_ as j}from"./JAi2wY28.js";import{u as P,a as M}from"./C6ghEBgg.js";import"./BYnHXhte.js";import"./QkSgYxCE.js";import"./DJUnOCSR.js";import"./kRIii9yh.js";const D={class:"bg-surface rounded-lg border border-base p-6 hover:shadow-md transition-shadow"},z={class:"flex justify-between items-start mb-4"},O={class:"flex-1"},E={class:"text-xl font-bold text-foreground mb-2"},V={class:"flex items-center gap-4 text-sm text-muted"},F={class:"flex items-center gap-1"},J={class:"flex items-center gap-1"},Q={class:"flex items-center gap-3"},G={class:"flex items-center gap-1"},H={class:"text-accent text-xl font-bold"},K={class:"mt-6"},W=v({__name:"RentalCard",props:{rental:{}},setup(t){const n=i=>({pending:{label:"Pending Approval",color:"bg-yellow-500"},approved:{label:"Confirmed",color:"bg-blue-500"},awaiting_pickup_confirmation:{label:"Pickup Arranged",color:"bg-orange-500"},ongoing:{label:"Book Received",color:"bg-purple-500"},awaiting_return_confirmation:{label:"Return Initiated",color:"bg-indigo-500"},completed:{label:"Return Complete",color:"bg-green-500"},rate_user:{label:"Rate User",color:"bg-amber-500"}})[i]||{label:i,color:"bg-gray-500"},f=i=>[{title:"Requested",description:"Rental request sent",icon:"i-lucide-send"},{title:"Confirmed",description:"Owner approved request",icon:"i-lucide-check-circle"},{title:"Pickup",description:"Ready for pickup",icon:"i-lucide-package"},{title:"Renting",description:"Currently renting",icon:"i-lucide-book-open"},{title:"Return",description:"Ready for return",icon:"i-lucide-package-check"},{title:"Completed",description:"Rental finished",icon:"i-lucide-circle-check"},{title:"Rate",description:"Rate the experience",icon:"i-lucide-star"}],d=i=>({pending:0,approved:1,awaiting_pickup_confirmation:2,ongoing:3,awaiting_return_confirmation:4,completed:5})[i]??0;return(i,c)=>{const u=R,_=j,r=k;return s(),h(r,{to:{path:`/rentals/${t.rental.rental_id}`,query:{from:"rental"}},class:"block"},{default:$(()=>[e("div",D,[e("div",z,[e("div",O,[e("h3",E,l(t.rental.title),1),e("div",V,[e("div",F,[o(u,{name:"lucide:user",class:"w-4 h-4"}),e("span",null,"Renting from "+l(t.rental.from),1)]),e("div",J,[o(u,{name:"lucide:calendar",class:"w-4 h-4"}),e("span",null,l(t.rental.rental_duration_days)+" Days",1)])])]),e("div",Q,[e("span",{class:C([n(t.rental.rent_status).color,"text-white px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap"])},l(n(t.rental.rent_status).label),3),e("div",G,[c[0]||(c[0]=e("span",{class:"text-accent text-xl font-bold"},"-",-1)),o(u,{name:"fluent:book-coins-20-regular",class:"w-6 h-6 text-accent"}),e("span",H,l(t.rental.cost),1)])])]),e("div",K,[o(_,{disabled:"",items:f(t.rental.rent_status),"model-value":d(t.rental.rent_status)},null,8,["items","model-value"])])])]),_:1},8,["to"])}}}),X=Object.assign(W,{__name:"RentalCard"}),Y={class:"bg-surface rounded-lg border border-base p-6 hover:shadow-md transition-shadow"},Z={class:"flex justify-between items-start mb-4"},ee={class:"flex-1"},te={class:"text-xl font-bold text-foreground mb-2"},ne={class:"flex items-center gap-4 text-sm text-muted"},se={class:"flex items-center gap-1"},oe={class:"flex items-center gap-1"},ie={class:"flex items-center gap-3"},ae={class:"flex items-center gap-1"},le={class:"text-accent text-xl font-bold"},ce={class:"mt-6"},re=v({__name:"LendCard",props:{lending:{}},setup(t){const n=i=>({pending:{label:"Pending Approval",color:"bg-yellow-500"},approved:{label:"Confirmed",color:"bg-blue-500"},awaiting_pickup_confirmation:{label:"Pickup Arranged",color:"bg-orange-500"},ongoing:{label:"Book Received",color:"bg-purple-500"},awaiting_return_confirmation:{label:"Return Initiated",color:"bg-indigo-500"},completed:{label:"Return Complete",color:"bg-green-500"},rate_user:{label:"Rate User",color:"bg-amber-500"}})[i]||{label:i,color:"bg-gray-500"},f=i=>[{title:"Pending",description:"Rental request received",icon:"i-lucide-send"},{title:"Confirmed",description:"Approved request",icon:"i-lucide-check-circle"},{title:"Delivered",description:"Book Delivered",icon:"i-lucide-package"},{title:"Active",description:"Currently lending",icon:"i-lucide-book-open"},{title:"Pickup",description:"Ready for return pickup",icon:"i-lucide-package-check"},{title:"Completed",description:"Rental finished",icon:"i-lucide-circle-check"},{title:"Rate",description:"Rate the experience",icon:"i-lucide-star"}],d=i=>({pending:0,approved:1,awaiting_pickup_confirmation:2,ongoing:3,awaiting_return_confirmation:4,completed:5})[i]??0;return(i,c)=>{const u=R,_=j,r=k;return s(),h(r,{to:{path:`/rentals/${t.lending.rental_id}`,query:{from:"lending"}},class:"block"},{default:$(()=>[e("div",Y,[e("div",Z,[e("div",ee,[e("h3",te,l(t.lending.title),1),e("div",ne,[e("div",se,[o(u,{name:"lucide:user",class:"w-4 h-4"}),e("span",null,"Lending to "+l(t.lending.to),1)]),e("div",oe,[o(u,{name:"lucide:calendar",class:"w-4 h-4"}),e("span",null,l(t.lending.rental_duration_days)+" Days",1)])])]),e("div",ie,[e("span",{class:C([n(t.lending.rent_status).color,"text-white px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap"])},l(n(t.lending.rent_status).label),3),e("div",ae,[c[0]||(c[0]=e("span",{class:"text-accent text-xl font-bold"},"+",-1)),o(u,{name:"fluent:book-coins-20-regular",class:"w-6 h-6 text-accent"}),e("span",le,l(t.lending.cost),1)])])]),e("div",ce,[o(_,{disabled:"",items:f(t.lending.rent_status),"model-value":d(t.lending.rent_status)},null,8,["items","model-value"])])])]),_:1},8,["to"])}}}),de=Object.assign(re,{__name:"LendCard"}),ue={class:"w-full bg-background"},ge={key:0},_e={key:0,class:"bg-surface rounded-lg p-6 w-full border border-base"},me={class:"flex justify-center items-center"},pe={class:"text-center"},fe={key:1,class:"bg-surface rounded-lg p-6 w-full border border-base"},be={class:"flex justify-center items-center"},xe={class:"text-center"},he={class:"text-red-500 mt-4 text-lg"},ve={key:2,class:"bg-surface rounded-lg p-6 w-full border border-base"},ye={class:"flex justify-center items-center"},we={class:"text-center"},ke={key:3,class:"space-y-4"},$e={key:1},Re={key:0,class:"bg-surface rounded-lg p-6 w-full border border-base"},Ce={class:"flex justify-center items-center"},Le={class:"text-center"},Se={key:1,class:"bg-surface rounded-lg p-6 w-full border border-base"},je={class:"flex justify-center items-center"},qe={class:"text-center"},Be={class:"text-red-500 mt-4 text-lg"},Te={key:2,class:"bg-surface rounded-lg p-6 w-full border border-base"},Ue={class:"flex justify-center items-center"},Ie={class:"text-center"},Ae={key:3,class:"space-y-4"},Ne=v({__name:"RentalsSection",props:{activeTab:{}},setup(t){const{rentals:n,loading:f,error:d,fetchUserRentals:i}=P(),{lendings:c,loading:u,error:_,fetchUserLendings:r}=M();return q(()=>{i(),r()}),(x,m)=>{const g=B,L=X;return s(),a("div",ue,[t.activeTab==="lending"?(s(),a("div",ge,[p(u)?(s(),a("div",_e,[e("div",me,[e("div",pe,[o(g,{name:"lucide:loader-2",class:"w-8 h-8 text-muted mx-auto animate-spin"}),m[0]||(m[0]=e("p",{class:"text-muted mt-4 text-lg"},"Loading your Lendings...",-1))])])])):p(_)?(s(),a("div",fe,[e("div",be,[e("div",xe,[o(g,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),e("p",he,l(p(_)),1)])])])):p(c).length===0?(s(),a("div",ve,[e("div",ye,[e("div",we,[o(g,{name:"bytesize:book",class:"w-16 h-16 text-muted mx-auto"}),m[1]||(m[1]=e("p",{class:"text-muted mt-4 text-lg"},"No active Lendings",-1))])])])):(s(),a("div",ke,[(s(!0),a(y,null,w(p(c),b=>(s(),h(de,{key:b.rental_id,lending:b},null,8,["lending"]))),128))]))])):(s(),a("div",$e,[p(f)?(s(),a("div",Re,[e("div",Ce,[e("div",Le,[o(g,{name:"lucide:loader-2",class:"w-8 h-8 text-muted mx-auto animate-spin"}),m[2]||(m[2]=e("p",{class:"text-muted mt-4 text-lg"},"Loading your rentals...",-1))])])])):p(d)?(s(),a("div",Se,[e("div",je,[e("div",qe,[o(g,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),e("p",Be,l(p(d)),1)])])])):p(n).length===0?(s(),a("div",Te,[e("div",Ue,[e("div",Ie,[o(g,{name:"bytesize:book",class:"w-16 h-16 text-muted mx-auto"}),m[3]||(m[3]=e("p",{class:"text-muted mt-4 text-lg"},"No active rentals",-1))])])])):(s(),a("div",Ae,[(s(!0),a(y,null,w(p(n),b=>(s(),h(L,{key:b.rental_id,rental:b},null,8,["rental"]))),128))]))]))])}}}),Pe=Object.assign(Ne,{__name:"RentalsSection"}),Me={class:"flex flex-col min-h-screen w-full pt-4 px-4 md:px-8 lg:px-15"},De={class:"mb-6 flex justify-between items-start"},ze={class:"text-base"},Oe={class:"font-bold text-3xl flex items-center gap-2 mb-1"},Ee={class:"w-full bg-background"},Ve={class:"mx-auto"},Fe={class:"grid grid-cols-2 gap-3 mb-6"},Je=["onClick"],Qe={class:"flex items-center justify-center gap-1"},Ge={class:"text-sm leading-tight"},He={class:"flex justify-between items-center mb-6"},Ke={class:"text-xl font-bold text-foreground"},st=v({__name:"index",setup(t){const n=T("lending"),d=U().query.activeTab;d&&!Array.isArray(d)&&(d==="lending"||d==="renting")&&(n.value=d),I({query:{activeTab:n.value}},{replace:!0});const i=[{id:"lending",label:"Books I'm Lending",icon:"lucide:trending-up"},{id:"renting",label:"Books I'm Renting",icon:"lucide:trending-down"}],c=A(()=>n.value==="lending"?"Lend Status":"Rent Status"),u=_=>{const r=new URL(window.location.href);r.searchParams.set("activeTab",_),window.history.replaceState({},"",r.toString())};return u(n.value),N(n,_=>{u(_)}),(_,r)=>{const x=R,m=k;return s(),a("div",Me,[e("div",De,[e("div",ze,[e("h1",Oe,[o(x,{name:"fluent:calendar-24-regular",class:"w-8 h-8 text-orange-500"}),r[0]||(r[0]=S(" My Rentals ",-1))]),r[1]||(r[1]=e("p",{class:"text-muted"},"Manage your lending and renting activities",-1))])]),e("div",Ee,[e("div",Ve,[e("div",Fe,[(s(),a(y,null,w(i,g=>e("button",{key:g.id,class:C(["px-4 py-3 rounded-lg font-medium transition-all text-center cursor-pointer",n.value===g.id?"bg-accent text-white":"bg-surface text-foreground hover:bg-surface-hover"]),onClick:L=>n.value=g.id},[e("div",Qe,[o(x,{name:g.icon},null,8,["name"]),e("span",Ge,l(g.label),1)])],10,Je)),64))])])]),e("div",He,[e("h2",Ke,l(c.value),1),o(m,{to:{path:"/rentals/history",query:{activeTab:n.value}},class:"text-foreground font-medium flex items-center gap-1 cursor-pointer"},{default:$(()=>[S(l(n.value==="lending"?"Lend":"Rent")+" history ",1),o(x,{name:"lucide:move-right",class:"w-6 h-6 text-foreground"})]),_:1},8,["to"])]),o(Pe,{"active-tab":n.value},null,8,["active-tab"])])}}});export{st as default};
