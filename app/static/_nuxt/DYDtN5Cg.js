import{q as c,ai as g}from"#entry";const o="http://127.0.0.1:8080",y=()=>{const a=c(!1),n=c(null),{$apiFetch:u}=g();return{loading:a,error:n,submitRating:async(i,e,s,l)=>{a.value=!0,n.value=null;try{const t=l==="rental"||l==="lending"?`${o}/api/ratings/rental/${i}`:`${o}/api/ratings/purchase/${i}`;return await u(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:{rating:e,review:s,from:l}}),{success:!0}}catch(r){console.error("Error submitting rating:",r);let t=r.data?.error||r.message||"Failed to submit rating";return r?.error?t=r.error:r?.message?t=r.message:typeof r=="string"&&(t=r),n.value=t,{success:!1,error:t}}finally{a.value=!1}},getUserRatings:async i=>{a.value=!0,n.value=null;try{const e=await u(`${o}/api/users/${i}/ratings`,{credentials:"include"});return{success:!0,ratings:Array.isArray(e)?e:[]}}catch(e){console.error("Error fetching ratings:",e);let s="Failed to fetch ratings";return e?.error?s=e.error:e?.message?s=e.message:typeof e=="string"&&(s=e),n.value=s,{success:!1,error:s}}finally{a.value=!1}}}};export{y as u};
