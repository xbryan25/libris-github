import{bL as N,f as L,bM as U,q as E,bN as K,C as M,bO as x,bb as R,bP as C,bn as q,S as W,bC as I,av as H,bQ as $,j,aI as X,z as Y,aO as B,bR as b,bi as A,bS as F,bT as V,bU as z,bV as O,bW as T,h as G,o as Q,w as J,r as Z,i as ee,P as te,bX as ne}from"#entry";const re=N(()=>{const e=E(new Map),t=E(),n=L(()=>{for(const v of e.value.values())if(v)return!0;return!1}),a=K({scrollBody:E(!0)});let c=null;const p=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",C&&c?.(),t.value=void 0};return M(n,(v,m)=>{if(!x)return;if(!v){m&&p();return}t.value===void 0&&(t.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,h={padding:l,margin:0},o=a.scrollBody?.value?typeof a.scrollBody.value=="object"?R({padding:a.scrollBody.value.padding===!0?l:a.scrollBody.value.padding,margin:a.scrollBody.value.margin===!0?l:a.scrollBody.value.margin},h):h:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof o.padding=="number"?`${o.padding}px`:String(o.padding),document.body.style.marginRight=typeof o.margin=="number"?`${o.margin}px`:String(o.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),C&&(c=q(document,"touchmove",r=>oe(r),{passive:!1})),W(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function pe(e){const t=Math.random().toString(36).substring(2,7),n=re();n.value.set(t,e??!1);const a=L({get:()=>n.value.get(t)??!1,set:c=>n.value.set(t,c)});return U(()=>{n.value.delete(t)}),a}function D(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:D(n)}}function oe(e){const t=e||window.event,n=t.target;return n instanceof Element&&D(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}var ae=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},g=new WeakMap,w=new WeakMap,S={},k=0,P=function(e){return e&&(e.host||P(e.parentNode))},se=function(e,t){return t.map(function(n){if(e.contains(n))return n;var a=P(n);return a&&e.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ue=function(e,t,n,a){var c=se(t,Array.isArray(e)?e:[e]);S[n]||(S[n]=new WeakMap);var p=S[n],v=[],m=new Set,l=new Set(c),h=function(r){!r||m.has(r)||(m.add(r),h(r.parentNode))};c.forEach(h);var o=function(r){!r||l.has(r)||Array.prototype.forEach.call(r.children,function(s){if(m.has(s))o(s);else try{var d=s.getAttribute(a),u=d!==null&&d!=="false",i=(g.get(s)||0)+1,f=(p.get(s)||0)+1;g.set(s,i),p.set(s,f),v.push(s),i===1&&u&&w.set(s,!0),f===1&&s.setAttribute(n,"true"),u||s.setAttribute(a,"true")}catch(y){console.error("aria-hidden: cannot operate on ",s,y)}})};return o(t),m.clear(),k++,function(){v.forEach(function(r){var s=g.get(r)-1,d=p.get(r)-1;g.set(r,s),p.set(r,d),s||(w.has(r)||r.removeAttribute(a),w.delete(r)),d||r.removeAttribute(n)}),k--,k||(g=new WeakMap,g=new WeakMap,w=new WeakMap,S={})}},ie=function(e,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),c=ae(e);return c?(a.push.apply(a,Array.from(c.querySelectorAll("[aria-live], script"))),ue(a,c,n,"aria-hidden")):function(){return null}};function me(e){let t;M(()=>I(e),n=>{n?t=ie(n):t&&t()}),H(()=>{t&&t()})}const ce=$(()=>E([]));function le(){const e=ce();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=_(e.value,t),e.value.unshift(t)},remove(t){e.value=_(e.value,t),e.value[0]?.resume()}}}function _(e,t){const n=[...e],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function de(e){return e.filter(t=>t.tagName!=="A")}var fe=j({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,a=t,{currentRef:c,currentElement:p}=X(),v=E(null),m=le(),l=Y({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});B(o=>{if(!x)return;const r=p.value;if(!n.trapped)return;function s(f){if(l.paused||!r)return;const y=f.target;r.contains(y)?v.value=y:b(v.value,{select:!0})}function d(f){if(l.paused||!r)return;const y=f.relatedTarget;y!==null&&(r.contains(y)||b(v.value,{select:!0}))}function u(f){r.contains(v.value)||b(r)}document.addEventListener("focusin",s),document.addEventListener("focusout",d);const i=new MutationObserver(u);r&&i.observe(r,{childList:!0,subtree:!0}),o(()=>{document.removeEventListener("focusin",s),document.removeEventListener("focusout",d),i.disconnect()})}),B(async o=>{const r=p.value;if(await W(),!r)return;m.add(l);const s=A();if(!r.contains(s)){const u=new CustomEvent(F,T);r.addEventListener(F,i=>a("mountAutoFocus",i)),r.dispatchEvent(u),u.defaultPrevented||(V(de(z(r)),{select:!0}),A()===s&&b(r))}o(()=>{r.removeEventListener(F,f=>a("mountAutoFocus",f));const u=new CustomEvent(O,T),i=f=>{a("unmountAutoFocus",f)};r.addEventListener(O,i),r.dispatchEvent(u),setTimeout(()=>{u.defaultPrevented||b(s??document.body,{select:!0}),r.removeEventListener(O,i),m.remove(l)},0)})});function h(o){if(!n.loop&&!n.trapped||l.paused)return;const r=o.key==="Tab"&&!o.altKey&&!o.ctrlKey&&!o.metaKey,s=A();if(r&&s){const d=o.currentTarget,[u,i]=ne(d);u&&i?!o.shiftKey&&s===i?(o.preventDefault(),n.loop&&b(u,{select:!0})):o.shiftKey&&s===u&&(o.preventDefault(),n.loop&&b(i,{select:!0})):s===d&&o.preventDefault()}}return(o,r)=>(Q(),G(ee(te),{ref_key:"currentRef",ref:c,tabindex:"-1","as-child":o.asChild,as:o.as,onKeydown:h},{default:J(()=>[Z(o.$slots,"default")]),_:3},8,["as-child","as"]))}}),ye=fe;export{ye as F,me as a,pe as u};
