import{q as n,ai as C,f as o}from"#entry";const y="http://127.0.0.1:8080",A=()=>{const s=n([]),r=n(!0),t=n(null),{$apiFetch:c}=C(),g=async()=>{r.value=!0,t.value=null;try{const e=await c(`${y}/api/purchases/my-sales`,{credentials:"include"});s.value=Array.isArray(e)?e:[]}catch(e){s.value=[],console.log("No sales found or error fetching sales:",e)}finally{r.value=!1}},d=async e=>{r.value=!0,t.value=null;try{const a=await c(`${y}/api/purchases/completed-sale/${e}`,{credentials:"include"});s.value=[a]}catch(a){s.value=[],console.log("Completed sale not found or error fetching completed sale:",a)}finally{r.value=!1}},f=async(e,a,p)=>{r.value=!0,t.value=null;try{const l=await c(`${y}/api/purchases/my-completed-sales`,{credentials:"include",query:{sortOrder:e,cardsPerPage:a,pageNumber:p}});s.value=Array.isArray(l)?l:[],console.log(s.value)}catch(l){s.value=[],console.log("No sales found or error fetching sales:",l)}finally{r.value=!1}},u=o(()=>e=>({pending:{label:"Requested",color:"bg-yellow-500",progress:1},approved:{label:"Confirmed",color:"bg-blue-500",progress:2},awaiting_pickup_confirmation:{label:"Ready for Pickup",color:"bg-orange-500",progress:3},completed:{label:"Completed",color:"bg-green-500",progress:4}})[e]||{label:e,color:"bg-gray-500",progress:0}),h=o(()=>e=>{const a=u.value(e.purchase_status).progress;return[{label:"Pending",status:"pending"},{label:"Confirmed",status:"approved"},{label:"Delivered",status:"awaiting_pickup_confirmation"},{label:"Completed",status:"completed"}].map((l,i)=>({...l,completed:i+1<a,active:i+1===a}))}),v=o(()=>e=>e?s.value.filter(a=>a.purchase_status===e):s.value),m=o(()=>s.value.length>0);return{sales:s,loading:r,error:t,fetchUserSales:g,fetchUserCompletedSale:d,fetchUserCompletedSales:f,statusBadge:u,progressSteps:h,filteredSales:v,hasActiveSales:m}},b="http://127.0.0.1:8080",_=()=>{const s=n([]),r=n(!0),t=n(null),{$apiFetch:c}=C(),g=async()=>{r.value=!0,t.value=null;try{const e=await c(`${b}/api/purchases/my-purchases`,{credentials:"include"});s.value=Array.isArray(e)?e:[]}catch(e){s.value=[],console.log("No purchases found or error fetching purchases:",e)}finally{r.value=!1}},d=async e=>{r.value=!0,t.value=null;try{const a=await c(`${b}/api/purchases/completed-purchase/${e}`,{credentials:"include"});s.value=[a]}catch(a){s.value=[],console.log("Completed purchase not found or error fetching completed purchase:",a)}finally{r.value=!1}},f=async(e,a,p)=>{r.value=!0,t.value=null;try{const l=await c(`${b}/api/purchases/my-completed-purchases`,{credentials:"include",query:{sortOrder:e,cardsPerPage:a,pageNumber:p}});s.value=Array.isArray(l)?l:[],console.log(s.value)}catch(l){s.value=[],console.log("No purchases found or error fetching purchases:",l)}finally{r.value=!1}},u=o(()=>e=>({pending:{label:"Pending Approval",color:"bg-yellow-500",progress:1},approved:{label:"Confirmed",color:"bg-blue-500",progress:2},awaiting_pickup_confirmation:{label:"Ready for Pickup",color:"bg-orange-500",progress:3},completed:{label:"Completed",color:"bg-green-500",progress:4}})[e]||{label:e,color:"bg-gray-500",progress:0}),h=o(()=>e=>{const a=u.value(e.purchase_status).progress;return[{label:"Requested",status:"pending"},{label:"Confirmed",status:"approved"},{label:"Pickup",status:"awaiting_pickup_confirmation"},{label:"Completed",status:"completed"}].map((l,i)=>({...l,completed:i+1<a,active:i+1===a}))}),v=o(()=>e=>e?s.value.filter(a=>a.purchase_status===e):s.value),m=o(()=>s.value.length>0);return{purchases:s,loading:r,error:t,fetchUserPurchases:g,fetchUserCompletedPurchase:d,fetchUserCompletedPurchases:f,statusBadge:u,progressSteps:h,filteredPurchases:v,hasActivePurchases:m}};export{A as a,_ as u};
