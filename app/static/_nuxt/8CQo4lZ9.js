import{_ as te}from"./JhUiaiGg.js";import{_ as se}from"./CoCDlcmg.js";import{_ as le}from"./5MqpBYnd.js";import{q as y,v as ae,ai as M,z as de,h as U,o as i,w as E,b as o,l as Q,a as t,d as j,j as H,f as D,c as v,B as V,k as oe,i as N,t as _,C as T,A as ie,n as ce,aW as K,x as ue,F as fe,J as me}from"#entry";import{_ as ne}from"./BOfFLyal.js";import{_ as pe}from"./B1FJlU1A.js";import{_ as ve}from"./DlAUqK2U.js";import{_ as re}from"./BvFGTDkj.js";import{_ as xe}from"./CBf3hF8c.js";import{u as ge}from"./DFFHip2M.js";const W="http://127.0.0.1:8080",_e=()=>{const e=y(!1),a=y(!1),c=y(!1),x=y(!1),b=y(null),A=y(null),C=y(null),u=y(null),P=y(!1),n=y(!1),f=y(null),l=y(null),k=ae(),{$apiFetch:I}=M(),r=de({first_name:"",middle_name:"",last_name:"",date_of_birth:"",phone_number:"",profile_image_url:"",address:{country:"",city:"",barangay:"",street:"",postal_code:"",latitude:null,longitude:null}}),$=m=>{m&&(r.first_name=m.first_name||"",r.middle_name=m.middle_name||"",r.last_name=m.last_name||"",r.date_of_birth=m.date_of_birth||"",r.phone_number=m.phone_number||"",r.profile_image_url=m.profile_image_url||"",m.address&&(r.address.country=m.address.country||"",r.address.city=m.address.city||"",r.address.barangay=m.address.barangay||"",r.address.street=m.address.street||"",r.address.postal_code=m.address.postal_code||"",r.address.latitude=m.address.latitude||null,r.address.longitude=m.address.longitude||null))};return{isEditingPersonal:e,isEditingAddress:a,savingPersonal:c,savingAddress:x,errorPersonal:b,errorAddress:A,successPersonal:C,successAddress:u,startEditingPersonal:m=>{$(m),e.value=!0,b.value=null,C.value=null},startEditingAddress:m=>{$(m),a.value=!0,A.value=null,u.value=null},cancelEditingPersonal:()=>{e.value=!1,b.value=null,C.value=null},cancelEditingAddress:()=>{a.value=!1,A.value=null,u.value=null},savePersonalInfo:async m=>{c.value=!0,b.value=null,C.value=null;try{const g=m||{first_name:r.first_name,middle_name:r.middle_name,last_name:r.last_name,date_of_birth:r.date_of_birth,phone_number:r.phone_number},J=JSON.parse(JSON.stringify(g,(q,S)=>{if(typeof S=="string")return S.trim();if(S!=null)return S})),d=await I(`${W}/api/users/profile/me/personal`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});return C.value=d.message||"Personal information updated successfully",k.add({title:"Success",description:C.value??"",color:"success"}),e.value=!1,r}catch(g){throw c.value=!1,b.value=g.message||"Failed to update personal information",k.add({title:"Error",description:b.value??"Failed to update personal information",color:"error"}),g}},saveAddress:async m=>{x.value=!0,A.value=null,u.value=null;try{const g=m||r.address,J=JSON.parse(JSON.stringify(g,(q,S)=>{if(typeof S=="string")return S.trim();if(S!==void 0)return S})),d=await I(`${W}/api/users/profile/me/address`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});return u.value=d.message||"Address updated successfully",k.add({title:"Success",description:u.value??"",color:"success"}),a.value=!1,r}catch(g){throw x.value=!1,A.value=g.message||"Failed to update address",k.add({title:"Error",description:A.value??"Failed to update address",color:"error"}),g}},isEditing:P,saving:n,error:f,success:l,editForm:r,startEditing:m=>{$(m),P.value=!0,f.value=null,l.value=null},cancelEditing:()=>{P.value=!1,f.value=null,l.value=null},saveProfile:async m=>{n.value=!0,f.value=null,l.value=null;try{const J=JSON.parse(JSON.stringify(m||r,(q,S)=>{if(typeof S=="string")return S.trim();if(S!=null)return S})),d=await I(`${W}/api/users/profile/me`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});return l.value=d.message||"Profile updated successfully",k.add({title:"Success",description:l.value??"",color:"success"}),P.value=!1,r}catch(g){f.value=g.message||"Failed to update profile",k.add({title:"Error",description:f.value??"Failed to update profile",color:"error"})}finally{n.value=!1}},updateProfileImage:async m=>{try{n.value=!0,await I(`${W}/api/users/profile/me`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_image_url:m})}),r.profile_image_url=m,l.value="Profile picture updated successfully"}catch(g){f.value=g.message||"Failed to update profile picture"}finally{n.value=!1}}}},ye={},be={class:"p-3 text-sm text-muted w-[300px] space-y-3"},he={class:"flex flex-col space-y-2"},we={class:"flex items-center justify-between"},Pe={class:"flex items-center justify-between"},$e={class:"flex items-center justify-between"},ke={class:"flex items-center justify-between"},Ee={class:"flex items-center justify-between"},Ue={class:"flex items-center justify-between"};function Ae(e,a){const c=Q,x=ne,b=pe;return i(),U(b,null,{content:E(()=>[t("div",be,[a[12]||(a[12]=t("div",{class:"font-semibold mb-2"},"Trust Score Criteria",-1)),t("div",he,[t("div",we,[a[1]||(a[1]=t("span",null,"1000 - 951",-1)),o(x,{class:"bg-[#15803D] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[0]||(a[0]=[j("Perfect",-1)])]),_:1})]),t("div",Pe,[a[3]||(a[3]=t("span",null,"950 - 751",-1)),o(x,{class:"bg-[#22C55E] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[2]||(a[2]=[j("Exceptional",-1)])]),_:1})]),t("div",$e,[a[5]||(a[5]=t("span",null,"750 - 500",-1)),o(x,{class:"bg-[#84CC16] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[4]||(a[4]=[j("Good",-1)])]),_:1})]),t("div",ke,[a[7]||(a[7]=t("span",null,"500 - 251",-1)),o(x,{class:"bg-[#FACC15] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[6]||(a[6]=[j("Decent",-1)])]),_:1})]),t("div",Ee,[a[9]||(a[9]=t("span",null,"250 - 51",-1)),o(x,{class:"bg-[#CA8A04] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[8]||(a[8]=[j("Bad",-1)])]),_:1})]),t("div",Ue,[a[11]||(a[11]=t("span",null,"50 - 0",-1)),o(x,{class:"bg-[#000000] text-white text-center px-3",variant:"solid"},{default:E(()=>[...a[10]||(a[10]=[j("Poor",-1)])]),_:1})])])])]),default:E(()=>[o(c,{icon:"i-heroicons-information-circle",variant:"ghost",size:"lg"})]),_:1})}const Ce=Object.assign(ve(ye,[["render",Ae]]),{__name:"TrustScoreDetails"}),Se=e=>{const a=y(!1),c=y(null),x=y(null),b=y(0),A=ae(),{$apiFetch:C}=M();return{uploading:a,error:c,success:x,progress:b,uploadProfilePicture:async(f,l)=>{a.value=!0,c.value=null,b.value=0;try{const{$supabase:k}=M();if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(f.type))throw new Error("Please upload a valid image file (JPEG, PNG, or WebP)");const r=5*1024*1024;if(f.size>r)throw new Error("File size must be less than 5MB");const $=f.name.split(".").pop(),w=`profile-pictures/${`profile-${l}-${Date.now()}.${$}`}`,{error:F}=await k.storage.from("profile_images").upload(w,f,{cacheControl:"3600",upsert:!1,contentType:f.type});if(F)throw new Error(`Upload failed: ${F.message}`);const{data:B}=k.storage.from("profile_images").getPublicUrl(w);if(!B?.publicUrl)throw new Error("Failed to get image URL");return b.value=100,B.publicUrl}catch(k){return c.value=k.message||"Upload failed",null}finally{a.value=!1}},updateProfileImageUrl:async f=>{try{return await C("http://127.0.0.1:8080/api/users/profile/me",{method:"PATCH",credentials:"include",body:{profile_image_url:f}}),A.add({title:"Success",description:"Profile picture updated successfully!",color:"success"}),!0}catch(l){return c.value=l.message||"Failed to update profile",A.add({title:"Error",description:l.message||"Failed to update profile",color:"error"}),!1}},deleteOldProfilePicture:async f=>{if(f)try{const{$supabase:l}=M(),I=`profile-pictures/${f.split("/").pop()}`;await l.storage.from("profile_images").remove([I])}catch(l){console.warn("Failed to delete old profile picture:",l)}}}},Ie={class:"flex flex-col items-center space-y-4"},Fe={class:"relative group"},Ve={class:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200"},je=["src"],Te=["disabled"],Ne={key:0,class:"flex space-x-2"},ze={key:1,class:"text-red-500 text-sm text-center max-w-xs"},Be=H({__name:"ProfilePictureUpload",props:{currentImageUrl:{},userId:{},onImageUpdate:{type:Function}},emits:["imageUpdated"],setup(e,{emit:a}){const c=e,x=a,{uploading:b,error:A,uploadProfilePicture:C,updateProfileImageUrl:u,deleteOldProfilePicture:P}=Se(),n=y(),f=y(null),l=D(()=>f.value||c.currentImageUrl),k=z=>{const F=z.target.files?.[0];F&&(f.value=URL.createObjectURL(F))},I=async()=>{const z=n.value?.files?.[0];if(z)try{const w=await C(z,c.userId);w&&await u(w)&&(c.currentImageUrl&&c.currentImageUrl!==w&&await P(c.currentImageUrl),f.value=null,n.value&&(n.value.value=""),x("imageUpdated",w),c.onImageUpdate?.(w))}catch(w){console.error("Upload failed:",w)}},r=()=>{f.value=null,n.value&&(n.value.value="")},$=()=>{n.value?.click()};return(z,w)=>{const F=oe,B=Q,G=re;return i(),v("div",Ie,[t("div",Fe,[t("div",Ve,[l.value?(i(),v("img",{key:0,src:l.value,alt:"Profile picture",class:"w-full h-full object-cover"},null,8,je)):(i(),U(F,{key:1,name:"heroicons:user-circle",class:"w-full h-full text-gray-400"}))]),t("button",{onClick:$,disabled:N(b),class:"absolute inset-0 bg-black bg-opacity-50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center"},[o(F,{name:"heroicons:camera",class:"w-8 h-8"})],8,Te)]),t("input",{ref_key:"fileInput",ref:n,type:"file",accept:"image/*",onChange:k,class:"hidden"},null,544),f.value?(i(),v("div",Ne,[o(B,{onClick:I,loading:N(b),color:"primary",size:"sm"},{default:E(()=>[j(_(N(b)?"Uploading...":"Upload"),1)]),_:1},8,["loading"]),o(B,{onClick:r,disabled:N(b),color:"gray",variant:"outline",size:"sm"},{default:E(()=>[...w[0]||(w[0]=[j(" Cancel ",-1)])]),_:1},8,["disabled"])])):V("",!0),N(A)?(i(),v("div",ze,_(N(A)),1)):V("",!0),o(G,{text:"Click the camera icon to upload a new profile picture. Supported: JPEG, PNG, WebP (max 5MB)"},{default:E(()=>[o(B,{variant:"ghost",size:"sm",icon:"i-heroicons-information-circle"})]),_:1})])}}}),Oe=Object.assign(Be,{__name:"ProfilePictureUpload"}),Y="http://127.0.0.1:8080",Je=e=>{const a=y(null),c=y(!1),x=y(null),{$apiFetch:b}=M();return{percentile:a,loading:c,error:x,fetchPercentile:async()=>{c.value=!0,x.value=null;try{const u=e?`${Y}/api/users/trust-score-percentile/${e}`:`${Y}/api/users/trust-score-percentile`,P=await b(u,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});a.value=P}catch(u){console.error("Trust score percentile error:",u),x.value=u?.message||"Failed to fetch trust score percentile"}finally{c.value=!1}},getPercentileText:()=>{const u=a.value?.trust_score_percentile;return u==null?" - ":`Better than ${Math.round(u)}% of users`}}},Re={class:"flex items-center justify-start space-x-6 flex-grow"},De={class:"flex gap-4"},Le={class:"flex flex-col justify-center space-y-3"},Me={class:"flex items-center h-full"},Ge={class:"flex flex-col space-y-3"},qe={class:"flex items-center space-x-2"},We={class:"flex items-center space-x-3"},Ze={key:1,class:"w-full max-w-[1500px] bg-surface border-base flex items-center justify-center p-6"},Qe={class:"text-lg text-red-500"},He={key:2,class:"w-full max-w-[1500px] h-auto bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-800 border-radius rounded-lg flex flex-col md:flex-row items-stretch px-6 py-6"},Ke={class:"flex items-center justify-start space-x-6 flex-grow"},Ye={key:1,class:"w-35 h-35 rounded-full overflow-hidden"},Xe=["src","alt"],et={class:"flex-1 flex flex-col justify-center"},tt=["title"],st=["title"],lt={class:"text-[25px] font-bold text-muted"},at={class:"flex items-center h-full"},ot={class:"flex flex-col"},it={class:"flex items-center space-x-2"},nt={class:"flex items-center space-x-3"},rt={class:"text-[40px] font-semibold text-base"},dt={class:"text-[15px] font-semibold text-muted"},ct=H({__name:"ProfileMainSection",props:{profile:{},loading:{type:Boolean},error:{},userId:{},isCurrentUser:{type:Boolean},isEditing:{type:Boolean},editForm:{}},emits:["profileUpdated","imageUpdated"],setup(e,{emit:a}){const c=e,{fetchPercentile:x,getPercentileText:b}=Je(c.userId);_e(),D(()=>c.editForm||{}),D(()=>c.isEditing||!1);const A=a,C=D(()=>{if(c.profile?.trust_score===null||c.profile?.trust_score===void 0)return{text:"Unknown",color:"bg-gray-500"};const n=c.profile.trust_score;return n>=951?{text:"Perfect",color:"bg-[#15803D]"}:n>=751?{text:"Exceptional",color:"bg-[#22C55E]"}:n>=500?{text:"Good",color:"bg-[#84CC16]"}:n>=251?{text:"Decent",color:"bg-[#FACC15]"}:n>=51?{text:"Bad",color:"bg-[#CA8A04]"}:{text:"Poor",color:"bg-[#000000]"}});T(()=>c.profile,n=>{n?.trust_score&&x()},{immediate:!0});const u=n=>{A("imageUpdated",n)},P=D(()=>{const n=c.profile?.first_name?.trim()||"",f=c.profile?.middle_name?.trim()||"",l=c.profile?.last_name?.trim()||"";return!n&&!f&&!l?"-":n&&l&&f?`${n} ${f.charAt(0)}. ${l}`:n&&l?`${n} ${l}`:n&&f?`${n} ${f.charAt(0)}.`:f&&l?`${f.charAt(0)}. ${l}`:n||l||"-"});return ie(()=>{c.profile?.trust_score&&x()}),y(!1),(n,f)=>{const l=te,k=se,I=le,r=oe,$=ne;return e.loading?(i(),U(I,{key:0,class:"w-full max-w-[1500px] h-[250px] bg-surface border-base flex flex-col md:flex-row items-stretch"},{default:E(()=>[t("div",Re,[t("div",De,[o(l,{class:"w-35 h-35 rounded-full"}),t("div",Le,[o(l,{class:"h-12 w-64"}),o(l,{class:"h-10 w-80"}),o(l,{class:"h-8 w-48"})])]),t("div",Me,[o(k,{orientation:"vertical",class:"h-[200px] border-base ml-[686px]",type:"solid"})]),t("div",Ge,[t("div",qe,[o(l,{class:"h-10 w-32"}),o(l,{class:"w-6 h-6 rounded-full"})]),t("div",We,[o(l,{class:"h-12 w-20"}),o(l,{class:"h-8 w-16 rounded-full"})]),o(l,{class:"h-4 w-48"})])])]),_:1})):e.error?(i(),v("div",Ze,[t("div",Qe,"Error: "+_(e.error),1)])):(i(),v("div",He,[t("div",Ke,[e.isCurrentUser?(i(),U(Oe,{key:0,"current-image-url":e.profile?.profile_image_url,"user-id":e.profile?.username||"",onImageUpdated:u},null,8,["current-image-url","user-id"])):e.profile?.profile_image_url?(i(),v("div",Ye,[t("img",{src:e.profile.profile_image_url,alt:`${e.profile.first_name} ${e.profile.last_name}'s profile picture`,class:"w-full h-full object-cover"},null,8,Xe)])):(i(),U(r,{key:2,name:"heroicons:user-circle",class:"w-35 h-35 rounded-full"})),t("div",et,[t("div",{class:"text-[42px] font-bold text-base truncate",title:e.profile?.username},_(e.profile?.username||"-"),9,tt),t("div",{class:"text-[35px] font-bold text-base truncate w-full",title:P.value},_(P.value),9,st),t("div",lt," Joined since "+_(e.profile?.account_activated_at||"-"),1)]),t("div",at,[o(k,{orientation:"vertical",class:"h-[200px] border-base",type:"solid"})]),t("div",ot,[t("div",it,[f[0]||(f[0]=t("div",{class:"text-[35px] font-extrabold text-base whitespace-nowrap"},"Trust Score",-1)),o(Ce)]),t("div",nt,[t("div",rt,_(e.profile?.trust_score),1),o($,{class:ce([C.value.color,"text-white text-center px-3 py-1",C.value.text==="Poor"?"border border-white":""]),variant:"solid"},{default:E(()=>[j(_(C.value.text),1)]),_:1},8,["class"])]),t("div",dt,_(N(b)()),1)])])]))}}}),Us=Object.assign(ct,{__name:"ProfileMainSection"}),Z=/^[A-Za-z]+(?:\s+[A-Za-z]+)*$/,ut=/^[A-Za-z\s]+$/,L=/^\s*$/;function X(e){const a=[];if(!e.first_name||L.test(e.first_name)?a.push({name:"first_name",message:"First name is required."}):Z.test(e.first_name.trim())||a.push({name:"first_name",message:"First name must contain only letters and spaces."}),e.middle_name&&!L.test(e.middle_name)&&!Z.test(e.middle_name.trim())&&a.push({name:"middle_name",message:"Middle name must contain only letters and spaces."}),!e.last_name||L.test(e.last_name)?a.push({name:"last_name",message:"Last name is required."}):Z.test(e.last_name.trim())||a.push({name:"last_name",message:"Last name must contain only letters and spaces."}),e.phone_number&&!L.test(e.phone_number)){const c=e.phone_number.trim();/^[0-9]+$/.test(c)?c.length!==11&&a.push({name:"phone_number",message:"Phone number must be exactly 11 digits."}):a.push({name:"phone_number",message:"Phone number must contain only numbers."})}return a}function ee(e){const a=[];return e.country&&!L.test(e.country)&&!ut.test(e.country.trim())&&a.push({name:"address.country",message:"Country must contain only letters and spaces."}),a}const ft={class:"flex-1 flex w-full items-start justify-between space-x-10"},mt={class:"flex flex-col w-full md:w-1/2 space-y-8"},pt={class:"grid grid-cols-3 gap-x-20 gap-y-8"},vt={class:"flex flex-col space-y-2"},xt={class:"flex flex-col space-y-2"},gt={class:"flex flex-col space-y-2"},_t={class:"flex flex-col space-y-2"},yt={class:"flex flex-col space-y-2"},bt={class:"flex-1 flex flex-col w-full md:w-1/2 space-y-8"},ht={class:"grid grid-cols-3 gap-x-20 gap-y-8"},wt={class:"flex flex-col space-y-2"},Pt={class:"flex flex-col space-y-2"},$t={class:"flex flex-col space-y-2"},kt={class:"flex flex-col space-y-2"},Et={class:"flex flex-col space-y-2"},Ut={key:1,class:"w-[1500px] h-[350px] bg-surface border-base flex items-center justify-center"},At={class:"text-lg text-red-500"},Ct={key:2,class:"w-full max-w-[1500px] h-auto bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-800 border-radius rounded-lg flex flex-col md:flex-row items-stretch px-10 py-6"},St={class:"flex flex-col md:flex-row w-full items-start justify-between gap-10"},It={class:"flex flex-col w-full md:w-1/2 space-y-8"},Ft={class:"flex justify-between items-center"},Vt={class:"flex items-center space-x-2"},jt={key:1,class:"flex space-x-2"},Tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-8 w-full"},Nt={class:"flex flex-col"},zt=["title"],Bt={key:2,class:"text-red-500 text-sm"},Ot={class:"flex flex-col"},Jt=["title"],Rt={key:2,class:"text-red-500 text-sm"},Dt={class:"flex flex-col"},Lt=["title"],Mt={key:2,class:"text-red-500 text-sm"},Gt={class:"flex flex-col min-w-0"},qt=["title"],Wt={class:"flex flex-col"},Zt=["title"],Qt={key:2,class:"text-red-500 text-sm"},Ht={class:"flex flex-col w-full md:w-1/2 space-y-8"},Kt={class:"flex justify-between items-center"},Yt={class:"flex items-center space-x-2"},Xt={key:1,class:"flex space-x-2"},es={key:0,class:"flex flex-col mb-2"},ts={class:"relative flex items-center w-full"},ss={key:0,class:"absolute z-50 mt-1 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded w-full max-h-40 overflow-auto"},ls=["onClick"],as={class:"grid grid-cols-3 gap-x-20 gap-y-8"},os={class:"flex flex-col"},is=["title"],ns={key:2,class:"text-red-500 text-sm"},rs={class:"flex flex-col"},ds=["title"],cs={class:"flex flex-col"},us=["title"],fs={class:"flex flex-col"},ms=["title"],ps={class:"flex flex-col"},vs=["title"],xs=H({__name:"ProfileAdditionalInfo",props:{profile:{},loading:{type:Boolean},error:{},isCurrentUser:{type:Boolean},isEditingPersonal:{type:Boolean},isEditingAddress:{type:Boolean},editForm:{},savingPersonal:{type:Boolean},savingAddress:{type:Boolean}},emits:["startEditPersonal","startEditAddress","savePersonal","saveAddress","cancelPersonal","cancelAddress"],setup(e,{emit:a}){const c="pk.8766fa6ab4b87b62cae79f213146bdc0",{addressQuery:x,suggestions:b,fetchSuggestions:A,selectSuggestion:C}=ge(c),u=y({}),P=y({}),n=e,f=a,l=D(()=>n.editForm||{}),k=K(n,"isEditingPersonal"),I=K(n,"isEditingAddress"),r=y(!1),$=y(!1);T(()=>n.savingPersonal,p=>{p||(r.value=!1)}),T(()=>n.savingAddress,p=>{p||($.value=!1)}),T(k,p=>{p?(r.value=!1,u.value={}):u.value={}}),T(I,p=>{p?($.value=!1,P.value={}):P.value={}}),T(()=>l.value.first_name,()=>{n.isEditingPersonal&&w("first_name")}),T(()=>l.value.middle_name,()=>{n.isEditingPersonal&&w("middle_name")}),T(()=>l.value.last_name,()=>{n.isEditingPersonal&&w("last_name")}),T(()=>l.value.phone_number,()=>{n.isEditingPersonal&&w("phone_number")}),T(()=>l.value.address?.country,()=>{n.isEditingAddress&&F("address.country")}),T(x,p=>{n.isEditingAddress&&p&&A()});function z(p){C(p,l.value.address),x.value=p.display_name,b.value=[]}function w(p){const s={first_name:l.value.first_name,middle_name:l.value.middle_name,last_name:l.value.last_name,phone_number:l.value.phone_number},O=X(s).find(R=>R.name===p);O?u.value[p]=O.message:delete u.value[p]}function F(p){const s=l.value.address||{},O=ee(s).find(R=>R.name===p);O?P.value[p]=O.message:delete P.value[p]}function B(){r.value=!0;const p=X({first_name:l.value.first_name,middle_name:l.value.middle_name,last_name:l.value.last_name,phone_number:l.value.phone_number});u.value=Object.fromEntries(p.map(s=>[s.name,s.message])),p.length===0&&f("savePersonal")}function G(){$.value=!0;const p=ee(l.value.address||{});P.value=Object.fromEntries(p.map(s=>[s.name,s.message])),p.length===0&&f("saveAddress")}return ie(()=>{l.value.address?.display_name&&(x.value=l.value.address.display_name)}),(p,s)=>{const h=te,O=se,R=le,m=Q,g=xe,J=re;return e.loading?(i(),U(R,{key:0,class:"w-full max-w-[1500px] h-[300px] bg-surface border-base flex flex-row items-stretch px-6 md:px-10"},{default:E(()=>[t("div",ft,[t("div",mt,[o(h,{class:"h-10 w-64"}),t("div",pt,[t("div",vt,[o(h,{class:"h-8 w-24"}),o(h,{class:"h-6 w-32"})]),t("div",xt,[o(h,{class:"h-8 w-28"}),o(h,{class:"h-6 w-28"})]),t("div",gt,[o(h,{class:"h-8 w-20"}),o(h,{class:"h-6 w-30"})]),t("div",_t,[o(h,{class:"h-8 w-28"}),o(h,{class:"h-6 w-24"})]),t("div",yt,[o(h,{class:"h-8 w-32"}),o(h,{class:"h-6 w-36"})])])]),o(O,{orientation:"vertical",class:"h-full w-5",type:"solid"}),t("div",bt,[o(h,{class:"h-10 w-32"}),t("div",ht,[t("div",wt,[o(h,{class:"h-8 w-20"}),o(h,{class:"h-6 w-24"})]),t("div",Pt,[o(h,{class:"h-8 w-16"}),o(h,{class:"h-6 w-20"})]),t("div",$t,[o(h,{class:"h-8 w-24"}),o(h,{class:"h-6 w-28"})]),t("div",kt,[o(h,{class:"h-8 w-20"}),o(h,{class:"h-6 w-32"})]),t("div",Et,[o(h,{class:"h-8 w-28"}),o(h,{class:"h-6 w-20"})])])])])]),_:1})):e.error?(i(),v("div",Ut,[t("div",At,"Error: "+_(e.error),1)])):(i(),v("div",Ct,[t("div",St,[t("div",It,[t("div",Ft,[s[22]||(s[22]=t("div",{class:"text-[32px] font-bold text-base"},"Personal Information",-1)),t("div",Vt,[e.isCurrentUser&&!e.isEditingPersonal?(i(),U(m,{key:0,icon:"i-heroicons-pencil",color:"primary",variant:"solid",size:"sm",onClick:s[0]||(s[0]=d=>p.$emit("startEditPersonal"))})):V("",!0),e.isCurrentUser&&e.isEditingPersonal?(i(),v("div",jt,[o(m,{color:"primary",size:"sm",disabled:r.value,loading:e.savingPersonal||r.value,onClick:B},{default:E(()=>[...s[20]||(s[20]=[j(" Save ",-1)])]),_:1},8,["disabled","loading"]),o(m,{color:"neutral",variant:"outline",size:"sm",disabled:r.value,onClick:s[1]||(s[1]=d=>p.$emit("cancelPersonal"))},{default:E(()=>[...s[21]||(s[21]=[j(" Cancel ",-1)])]),_:1},8,["disabled"])])):V("",!0)])]),t("div",Tt,[t("div",Nt,[s[23]||(s[23]=t("div",{class:"text-[25px] font-semibold text-base"},"First Name",-1)),e.isEditingPersonal?(i(),U(g,{key:1,modelValue:l.value.first_name,"onUpdate:modelValue":s[2]||(s[2]=d=>l.value.first_name=d),onInput:s[3]||(s[3]=d=>w("first_name")),placeholder:"First Name",color:u.value.first_name?"error":"primary",disabled:r.value},null,8,["modelValue","color","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.first_name},_(e.profile?.first_name||"-"),9,zt)),u.value.first_name?(i(),v("span",Bt,_(u.value.first_name),1)):V("",!0)]),t("div",Ot,[s[24]||(s[24]=t("div",{class:"text-[25px] font-semibold text-base"},"Middle Name",-1)),e.isEditingPersonal?(i(),U(g,{key:1,modelValue:l.value.middle_name,"onUpdate:modelValue":s[4]||(s[4]=d=>l.value.middle_name=d),placeholder:"Middle Name",color:u.value.middle_name?"error":"primary",disabled:r.value,onInput:s[5]||(s[5]=d=>w("middle_name"))},null,8,["modelValue","color","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.middle_name},_(e.profile?.middle_name||"-"),9,Jt)),u.value.middle_name?(i(),v("span",Rt,_(u.value.middle_name),1)):V("",!0)]),t("div",Dt,[s[25]||(s[25]=t("div",{class:"text-[25px] font-semibold text-base"},"Last Name",-1)),e.isEditingPersonal?(i(),U(g,{key:1,modelValue:l.value.last_name,"onUpdate:modelValue":s[6]||(s[6]=d=>l.value.last_name=d),placeholder:"Last Name",color:u.value.last_name?"error":"primary",disabled:r.value,onInput:s[7]||(s[7]=d=>w("last_name"))},null,8,["modelValue","color","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.last_name},_(e.profile?.last_name||"-"),9,Lt)),u.value.last_name?(i(),v("span",Mt,_(u.value.last_name),1)):V("",!0)]),t("div",Gt,[s[26]||(s[26]=t("div",{class:"text-[25px] font-semibold text-base"},"Date of Birth",-1)),e.isEditingPersonal?(i(),U(g,{key:1,modelValue:l.value.date_of_birth,"onUpdate:modelValue":s[8]||(s[8]=d=>l.value.date_of_birth=d),type:"date",disabled:r.value},null,8,["modelValue","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted overflow-hidden text-ellipsis whitespace-nowrap",title:e.profile?.date_of_birth},_(e.profile?.date_of_birth||"-"),9,qt))]),t("div",Wt,[s[27]||(s[27]=t("div",{class:"text-[25px] font-semibold text-base whitespace-nowrap"},"Phone Number",-1)),e.isEditingPersonal?(i(),U(g,{key:1,modelValue:l.value.phone_number,"onUpdate:modelValue":s[9]||(s[9]=d=>l.value.phone_number=d),placeholder:"Phone Number",color:u.value.phone_number?"error":"primary",disabled:r.value,onInput:s[10]||(s[10]=d=>w("phone_number"))},null,8,["modelValue","color","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.phone_number},_(e.profile?.phone_number||"-"),9,Zt)),u.value.phone_number?(i(),v("span",Qt,_(u.value.phone_number),1)):V("",!0)])])]),o(O,{orientation:"vertical",class:"h-full",type:"solid"}),t("div",Ht,[t("div",Kt,[s[30]||(s[30]=t("div",{class:"text-[32px] font-bold text-base"},"Address",-1)),t("div",Yt,[e.isCurrentUser&&!e.isEditingAddress?(i(),U(m,{key:0,icon:"i-heroicons-pencil",color:"primary",variant:"solid",size:"sm",onClick:s[11]||(s[11]=d=>p.$emit("startEditAddress"))})):V("",!0),e.isCurrentUser&&e.isEditingAddress?(i(),v("div",Xt,[o(m,{color:"primary",size:"sm",disabled:$.value,loading:e.savingAddress||$.value,onClick:G},{default:E(()=>[...s[28]||(s[28]=[j(" Save ",-1)])]),_:1},8,["disabled","loading"]),o(m,{color:"neutral",variant:"outline",size:"sm",disabled:$.value,onClick:s[12]||(s[12]=d=>p.$emit("cancelAddress"))},{default:E(()=>[...s[29]||(s[29]=[j(" Cancel ",-1)])]),_:1},8,["disabled"])])):V("",!0)])]),e.isEditingAddress?(i(),v("div",es,[s[31]||(s[31]=t("div",{class:"text-[25px] font-semibold text-base"},"Search Address",-1)),t("div",ts,[o(g,{modelValue:N(x),"onUpdate:modelValue":s[13]||(s[13]=d=>ue(x)?x.value=d:null),disabled:$.value,placeholder:"Search Address..."},null,8,["modelValue","disabled"]),o(J,{text:"Parsed address may not be accurate. Please edit manually if incorrect."},{default:E(()=>[o(m,{variant:"ghost",size:"sm",icon:"i-heroicons-information-circle"})]),_:1}),N(b).length?(i(),v("ul",ss,[(i(!0),v(fe,null,me(N(b),(d,q)=>(i(),v("li",{key:q,onClick:S=>z(d),class:"p-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-zinc-700"},_(d.display_name),9,ls))),128))])):V("",!0)])])):V("",!0),t("div",as,[t("div",os,[s[32]||(s[32]=t("div",{class:"text-[25px] font-semibold text-base"},"Country",-1)),e.isEditingAddress?(i(),U(g,{key:1,modelValue:l.value.address.country,"onUpdate:modelValue":s[14]||(s[14]=d=>l.value.address.country=d),placeholder:"Country",color:P.value["address.country"]?"error":"primary",disabled:$.value,onInput:s[15]||(s[15]=d=>F("address.country"))},null,8,["modelValue","color","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.address?.country},_(e.profile?.address?.country||"-"),9,is)),P.value["address.country"]?(i(),v("span",ns,_(P.value["address.country"]),1)):V("",!0)]),t("div",rs,[s[33]||(s[33]=t("div",{class:"text-[25px] font-semibold text-base"},"City",-1)),e.isEditingAddress?(i(),U(g,{key:1,modelValue:l.value.address.city,"onUpdate:modelValue":s[16]||(s[16]=d=>l.value.address.city=d),disabled:$.value,placeholder:"City"},null,8,["modelValue","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.address?.city},_(e.profile?.address?.city||"-"),9,ds))]),t("div",cs,[s[34]||(s[34]=t("div",{class:"text-[25px] font-semibold text-base"},"Barangay",-1)),e.isEditingAddress?(i(),U(g,{key:1,modelValue:l.value.address.barangay,"onUpdate:modelValue":s[17]||(s[17]=d=>l.value.address.barangay=d),disabled:$.value,placeholder:"Barangay"},null,8,["modelValue","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.address?.barangay},_(e.profile?.address?.barangay||"-"),9,us))]),t("div",fs,[s[35]||(s[35]=t("div",{class:"text-[25px] font-semibold text-base"},"Street",-1)),e.isEditingAddress?(i(),U(g,{key:1,modelValue:l.value.address.street,"onUpdate:modelValue":s[18]||(s[18]=d=>l.value.address.street=d),disabled:$.value,placeholder:"Street"},null,8,["modelValue","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.address?.street},_(e.profile?.address?.street||"-"),9,ms))]),t("div",ps,[s[36]||(s[36]=t("div",{class:"text-[25px] font-semibold text-base"},"Postal Code",-1)),e.isEditingAddress?(i(),U(g,{key:1,modelValue:l.value.address.postal_code,"onUpdate:modelValue":s[19]||(s[19]=d=>l.value.address.postal_code=d),disabled:$.value,placeholder:"Postal Code"},null,8,["modelValue","disabled"])):(i(),v("div",{key:0,class:"text-[20px] text-muted truncate max-w-full",title:e.profile?.address?.postal_code},_(e.profile?.address?.postal_code||"-"),9,vs))])])])])]))}}}),As=Object.assign(xs,{__name:"ProfileAdditionalInfo"});export{Us as P,As as a,_e as u};
