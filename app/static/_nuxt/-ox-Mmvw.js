import{j as _,q as x,v as y,s as v,c as h,o as g,F as R,a as i,b as a,l as C,w as u,d as m,i as o,x as G,y as S,t as z,A as D,h as O,B as H}from"#entry";import{_ as J}from"./B7NIlbhz.js";import{u as K}from"./mqmIq7AT.js";import{u as Q,P as W,a as X}from"./3IJygRES.js";import{u as Y}from"./R0OndqsU.js";import"./BDYeLtO0.js";import"./QkSgYxCE.js";import"./DNBF-Q6I.js";import"./JhUiaiGg.js";import"./CoCDlcmg.js";import"./DJUnOCSR.js";import"./5MqpBYnd.js";import"./BOfFLyal.js";import"./Cfw6G_CD.js";import"./DqPfgwhY.js";import"./kRIii9yh.js";import"./B4JnBqUr.js";import"./B8ufzAAH.js";import"./DlAUqK2U.js";import"./BVhyiyNc.js";import"./CBf3hF8c.js";import"./DGycg10u.js";const Z={class:"my-6"},ee={class:"flex flex-col gap-1 items-center w-full h-40 p-5"},oe={class:"flex gap-2 w-full pt-5 justify-center"},te=_({__name:"LogoutButton",setup(w){const r=x(!1),s=y(),d=v(),l=async()=>{try{const{messageTitle:t,message:e}=await d.logout();s.add({title:t,description:e,color:"success"}),S("/login")}catch(t){s.add({title:"Login failed.",description:t.data.error,color:"error"})}};return(t,e)=>{const n=C,f=J;return g(),h(R,null,[i("div",Z,[a(n,{class:"px-6 py-2 w-55 h-10 bg-green-600 hover:bg-green-700 text-white text-lg font-semibold rounded-lg justify-center cursor-pointer",onClick:e[0]||(e[0]=c=>r.value=!0)},{default:u(()=>[...e[4]||(e[4]=[m("Logout",-1)])]),_:1})]),a(f,{open:o(r),"onUpdate:open":e[3]||(e[3]=c=>G(r)?r.value=c:null)},{content:u(()=>[i("div",ee,[e[7]||(e[7]=i("h2",{class:"text-3xl font-semibold"},"Logout Confirmation",-1)),e[8]||(e[8]=i("h3",{class:"text-md font-semibold text-muted"},"Are you sure you want to log out?",-1)),i("div",oe,[a(n,{size:"md",color:"error",variant:"solid",class:"cursor-pointer",onClick:e[1]||(e[1]=c=>r.value=!1)},{default:u(()=>[...e[5]||(e[5]=[m("Cancel",-1)])]),_:1}),a(n,{size:"md",color:"primary",variant:"solid",type:"submit",class:"cursor-pointer",onClick:e[2]||(e[2]=async()=>await l())},{default:u(()=>[...e[6]||(e[6]=[m("Confirm",-1)])]),_:1})])])]),_:1},8,["open"])],64)}}}),se=Object.assign(te,{__name:"LogoutButton"}),re={class:"my-6"},ne=_({__name:"ProfileChangePasswordSection",setup(w){const r=y(),s=x(!1),d=v(),l=async()=>{if(!s.value){s.value=!0;try{const t=await Y();r.add({title:t.messageTitle||"Verification Code Sent!",description:t.message||"Please check your email for the verification code.",color:"success"}),await new Promise(e=>setTimeout(e,1e3)),d.allowedInputChangePasswordCode=!0,S("/change-password-code")}catch(t){let e="An unexpected error occurred.";t?.data?.error?e=t.data.error:t?.message&&(e=t.message);const n=e.includes("Google");r.add({title:n?"Cannot Change Password":"Request Failed",description:e,color:"error"}),s.value=!1}}};return(t,e)=>{const n=C;return g(),h("div",re,[a(n,{disabled:o(s),class:"px-6 py-2 w-55 h-10 bg-green-600 hover:bg-green-700 text-white font-semibold text-lg rounded-lg transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed justify-center",onClick:l},{default:u(()=>[m(z(o(s)?"Sending Code...":"Change Password"),1)]),_:1},8,["disabled"])])}}}),ae=Object.assign(ne,{__name:"ProfileChangePasswordSection"}),ie={class:"min-h-screen w-full pt-4 px-4 md:px-8 lg:px-15"},de={class:"mt-20 gap-10 flex flex-col justify-center items-center"},le={class:"flex gap-2"},je=_({__name:"me",setup(w){const{profile:r,fetchProfile:s,loading:d,error:l}=K(),t=v(),{isEditingPersonal:e,isEditingAddress:n,savingPersonal:f,savingAddress:c,startEditingPersonal:b,startEditingAddress:A,savePersonalInfo:E,saveAddress:B,cancelEditingPersonal:$,cancelEditingAddress:k,editForm:P,isEditing:L}=Q(),U=()=>{b(r.value)},j=()=>{A(r.value)},T=async()=>{try{await E(),await s()}catch{}},I=async()=>{try{await B(),await s()}catch{}},M=()=>{$()},V=()=>{k()},q=async p=>{await s()},F=async p=>{await s()};return D(()=>{s()}),(p,ce)=>{const N=se;return g(),h("div",ie,[i("div",de,[a(W,{profile:o(r),loading:o(d),error:o(l),"is-current-user":!0,"is-editing":o(L),"edit-form":o(P),onProfileUpdated:q,onImageUpdated:F},null,8,["profile","loading","error","is-editing","edit-form"]),a(X,{profile:o(r),loading:o(d),error:o(l),"is-current-user":!0,"is-editing-personal":o(e),"is-editing-address":o(n),"edit-form":o(P),"saving-personal":o(f),"saving-address":o(c),onStartEditPersonal:U,onStartEditAddress:j,onSavePersonal:T,onSaveAddress:I,onCancelPersonal:M,onCancelAddress:V},null,8,["profile","loading","error","is-editing-personal","is-editing-address","edit-form","saving-personal","saving-address"]),i("div",le,[a(N),o(t).isGoogleLogin==!1?(g(),O(ae,{key:0})):H("",!0)])])])}}});export{je as default};
