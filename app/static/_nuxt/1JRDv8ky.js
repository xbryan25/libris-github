import{q as d,ai as D,j as P,A as k,c,o as r,B as y,i as e,a as t,b as a,k as $,F as w,J as C,n as R,t as b,az as S,w as U,_ as L,d as A}from"#entry";import{_ as E,a as F,b as q}from"./B-69Asox.js";import{u as z,a as G}from"./CHCiICDL.js";const T="http://127.0.0.1:8080",H=()=>{const p=d(!1),m=d(null),{$apiFetch:_}=D();return{loading:p,error:m,getCompletedPurchaseRatings:async h=>{p.value=!0,m.value=null;try{const o=await _(`${T}/api/ratings/purchase/${h}`,{credentials:"include"});return{givenRating:o.given_rating,givenComment:o.given_comment,receivedRating:o.received_rating,receivedComment:o.received_comment}}catch(o){return console.error("Error fetching ratings:",o),null}finally{p.value=!1}}}},J={class:"space-y-6"},M={key:0,class:"bg-surface rounded-lg border border-base p-8 flex gap-10"},O={class:"flex-1"},K={class:"text-center mb-3"},Q={class:"flex justify-center gap-2"},W={class:"flex justify-center items-center gap-3"},X={key:0,class:"mt-5 p-5 bg-background rounded-xl"},Y={class:"text-justify"},Z={class:"flex-1"},ee={class:"text-center mb-3"},te={class:"flex justify-center gap-2"},se={class:"flex justify-center items-center gap-3"},ae={key:0,class:"mt-5 p-5 bg-background rounded-xl"},ne={class:"text-justify"},oe=P({__name:"PurchaseViewRatingCard",props:{purchaseId:{}},setup(p){const m=p,{getCompletedPurchaseRatings:_,loading:n}=H(),h=d(0),o=d(""),f=d(0),g=d("");return k(async()=>{const s=await _(m.purchaseId);s&&(h.value=s.givenRating,o.value=s.givenComment,f.value=s.receivedRating,g.value=s.receivedComment),console.log(s)}),(s,l)=>{const i=$;return r(),c("div",J,[e(n)?y("",!0):(r(),c("div",M,[t("div",O,[t("div",K,[t("div",Q,[a(i,{name:"lucide:star",class:"w-16 h-16 text-amber-500 mb-4"}),a(i,{name:"lucide:arrow-big-up",class:"w-16 h-16 text-amber-500 mb-4"})]),l[0]||(l[0]=t("h2",{class:"text-2xl font-bold mb-2"},"Rating Given",-1))]),t("div",null,[t("div",W,[(r(),c(w,null,C([1,2,3,4,5],u=>a(i,{key:u,name:"lucide:star",class:R(["w-14 h-14 transition-all duration-200",u<=e(h)?"text-amber-400 fill-amber-400":"text-gray-300"])},null,8,["class"])),64))])]),e(o)!==""?(r(),c("div",X,[t("p",Y,b(e(o)),1)])):y("",!0)]),t("div",Z,[t("div",ee,[t("div",te,[a(i,{name:"lucide:star",class:"w-16 h-16 text-amber-500 mb-4"}),a(i,{name:"lucide:arrow-big-down",class:"w-16 h-16 text-amber-500 mb-4"})]),l[1]||(l[1]=t("h2",{class:"text-2xl font-bold mb-2"},"Rating Received",-1))]),t("div",null,[t("div",se,[(r(),c(w,null,C([1,2,3,4,5],u=>a(i,{key:u,name:"lucide:star",class:R(["w-14 h-14 transition-all duration-200",u<=e(f)?"text-amber-400 fill-amber-400":"text-gray-300"])},null,8,["class"])),64))])]),e(g)!==""?(r(),c("div",ae,[t("p",ne,b(e(g)),1)])):y("",!0)])]))])}}}),ce=Object.assign(oe,{__name:"PurchaseViewRatingCard"}),re={class:"min-h-screen w-full pt-4 pb-6 px-4 md:px-8 lg:px-15"},le={class:"mb-6"},ie={class:"font-bold text-3xl flex items-center gap-2 mb-1"},ue={key:0,class:"bg-surface rounded-lg border border-base p-12"},de={class:"flex justify-center items-center"},me={class:"text-center"},_e={key:1,class:"bg-surface rounded-lg border border-base p-12"},pe={class:"flex justify-center items-center"},he={class:"text-center"},ge={key:2,class:"space-y-6"},be=P({__name:"[purchaseId]",setup(p){const m=S(),_=m.params.purchaseId,n=m.query.from,{purchases:h,fetchUserCompletedPurchase:o}=z(),{sales:f,fetchUserCompletedSale:g}=G(),s=d(null),l=d(!0),i=async()=>{l.value=!0;try{n==="purchase"?(await o(_),s.value=h.value[0]??null):n==="sale"&&(await g(_),s.value=f.value[0]??null)}catch(u){console.error("Error fetching purchase data:",u)}finally{l.value=!1}};return k(()=>{i()}),(u,x)=>{const v=$,j=L,I=E,V=F,B=q,N=ce;return r(),c("div",re,[t("div",le,[a(j,{to:`/purchases/history?activeTab=${e(n)==="purchase"?"buying":"selling"}`,class:"flex items-center gap-2 text-base pt-4 pb-4 hover:text-foreground mb-4 cursor-pointer"},{default:U(()=>[a(v,{name:"lucide:arrow-left",class:"w-5 h-5"}),t("span",null,"Back to "+b(e(n)==="purchase"?"Purchases":"Sales")+" History",1)]),_:1},8,["to"]),t("h1",ie,[a(v,{name:e(n)==="purchase"?"lucide:trending-down":"lucide:trending-up",class:"w-8 h-8 text-orange-500"},null,8,["name"]),A(" "+b(e(n)==="purchase"?"Purchase Details":"Sale Details"),1)])]),e(l)?(r(),c("div",ue,[t("div",de,[t("div",me,[a(v,{name:"lucide:loader-2",class:"w-12 h-12 text-muted mx-auto animate-spin"}),x[0]||(x[0]=t("p",{class:"text-muted mt-4 text-lg"},"Loading details...",-1))])])])):e(s)?(r(),c("div",ge,[a(I,{item:e(s),from:e(n),"is-completed":!0},null,8,["item","from"]),a(V,{item:e(s),from:e(n)},null,8,["item","from"]),a(B,{cost:e(s).cost,"all-fees-captured":e(s).all_fees_captured,from:e(n)},null,8,["cost","all-fees-captured","from"]),a(N,{from:e(n),item:e(s),"purchase-id":e(_)},null,8,["from","item","purchase-id"])])):(r(),c("div",_e,[t("div",pe,[t("div",he,[a(v,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),x[1]||(x[1]=t("p",{class:"text-red-500 mt-4 text-lg"},"Purchase not found",-1))])])]))])}}});export{be as default};
