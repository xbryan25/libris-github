import{_ as V}from"./JhUiaiGg.js";import{E as D,e as F,f as T,g as R,c as d,o as n,b as i,w as x,B as m,n as u,r as g,d as P,t as p,a as t,i as b,h as $,L as z,F as U,J as E,Q as L,l as _,P as Y,ai as G,j as W,q as S,v as J,s as O,ay as A,C as I,k as N,x as Q,A as H,_ as K}from"#entry";import{_ as X}from"./5MqpBYnd.js";import{c as Z}from"./DGycg10u.js";import{_ as ee}from"./BOfFLyal.js";import{_ as te}from"./CoCDlcmg.js";import{_ as le}from"./BdGgjiO2.js";import{u as se}from"./Qdc9UZxI.js";import"./DJUnOCSR.js";import"./CxmxAOEW.js";import"./QkSgYxCE.js";import"./DNBF-Q6I.js";const ae={slots:{root:"relative grid rounded-lg p-6 lg:p-8 xl:p-10 gap-6",header:"",body:"flex flex-col min-w-0",footer:"flex flex-col gap-6 items-center",titleWrapper:"flex items-center gap-3",title:"text-highlighted text-2xl sm:text-3xl text-pretty font-semibold",description:"text-muted text-base text-pretty mt-2",priceWrapper:"flex items-center gap-1",price:"text-highlighted text-3xl sm:text-4xl font-semibold",discount:"text-muted line-through text-xl sm:text-2xl",billing:"flex flex-col justify-between min-w-0",billingPeriod:"text-toned truncate text-xs font-medium",billingCycle:"text-muted truncate text-xs font-medium",features:"flex flex-col gap-3 flex-1 mt-6 grow-0",feature:"flex items-center gap-2 min-w-0",featureIcon:"size-5 shrink-0 text-primary",featureTitle:"text-muted text-sm truncate",badge:"",button:"",tagline:"text-base font-semibold text-default",terms:"text-xs/5 text-muted text-center text-balance"},variants:{orientation:{horizontal:{root:"grid-cols-1 lg:grid-cols-3 justify-between divide-y lg:divide-y-0 lg:divide-x divide-default",body:"lg:col-span-2 pb-6 lg:pb-0 lg:pr-6 justify-center",footer:"lg:justify-center lg:items-center lg:p-6 lg:max-w-xs lg:w-full lg:mx-auto",features:"lg:grid lg:grid-cols-2 lg:mt-12"},vertical:{footer:"justify-end",priceWrapper:"mt-6"}},variant:{solid:{root:"bg-inverted",title:"text-inverted",description:"text-dimmed",price:"text-inverted",discount:"text-dimmed",billingCycle:"text-dimmed",billingPeriod:"text-dimmed",featureTitle:"text-dimmed"},outline:{root:"bg-default ring ring-default"},soft:{root:"bg-elevated/50"},subtle:{root:"bg-elevated/50 ring ring-default"}},highlight:{true:{root:"ring-2 ring-inset ring-primary"}},scale:{true:{root:"lg:scale-[1.1] lg:z-[1]"}}},compoundVariants:[{orientation:"horizontal",variant:"soft",class:{root:"divide-accented"}},{orientation:"horizontal",variant:"subtle",class:{root:"divide-accented"}}],defaultVariants:{variant:"outline"}},ie=Object.assign({inheritAttrs:!1},{__name:"UPricingPlan",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},badge:{type:[String,Object],required:!1},billingCycle:{type:String,required:!1},billingPeriod:{type:String,required:!1},price:{type:String,required:!1},discount:{type:String,required:!1},features:{type:Array,required:!1},button:{type:Object,required:!1},tagline:{type:String,required:!1},terms:{type:String,required:!1},orientation:{type:null,required:!1,default:"vertical"},variant:{type:null,required:!1},highlight:{type:Boolean,required:!1},scale:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(e){const l=e,o=D(),w=F(),[v,k]=Z(),s=T(()=>R({extend:R(ae),...w.ui?.pricingPlan||{}})({orientation:l.orientation,variant:l.variant,highlight:l.highlight,scale:l.scale})),h=T(()=>l.features?.map(a=>typeof a=="string"?{title:a}:a));return(a,c)=>(n(),d(U,null,[i(b(v),null,{default:x(()=>[e.discount||e.price||o.discount||o.price||e.billingCycle||e.billingPeriod||o.billing?(n(),d("div",{key:0,class:u(s.value.priceWrapper({class:l.ui?.priceWrapper}))},[e.discount&&e.price||o.discount?(n(),d("div",{key:0,class:u(s.value.discount({class:l.ui?.discount}))},[g(a.$slots,"discount",{},()=>[P(p(e.price),1)])],2)):m("",!0),e.discount||e.price||o.price?(n(),d("div",{key:1,class:u(s.value.price({class:l.ui?.price}))},[g(a.$slots,"price",{},()=>[P(p(e.discount||e.price),1)])],2)):m("",!0),e.billingCycle||e.billingPeriod||o.billing?(n(),d("div",{key:2,class:u(s.value.billing({class:l.ui?.billing}))},[g(a.$slots,"billing",{},()=>[t("span",{class:u(s.value.billingPeriod({class:l.ui?.billingPeriod}))},p(e.billingPeriod||" "),3),e.billingCycle?(n(),d("span",{key:0,class:u(s.value.billingCycle({class:l.ui?.billingCycle}))},p(e.billingCycle),3)):m("",!0)])],2)):m("",!0)],2)):m("",!0)]),_:3}),i(b(Y),z({as:e.as},a.$attrs,{"data-orientation":e.orientation,class:s.value.root({class:[l.ui?.root,l.class]})}),{default:x(()=>[o.header&&e.orientation==="vertical"?(n(),d("div",{key:0,class:u(s.value.header({class:l.ui?.header}))},[g(a.$slots,"header")],2)):m("",!0),t("div",{class:u(s.value.body({class:l.ui?.body}))},[g(a.$slots,"body",{},()=>[t("div",{class:u(s.value.titleWrapper({class:l.ui?.titleWrapper}))},[e.title||o.title?(n(),d("div",{key:0,class:u(s.value.title({class:l.ui?.title}))},[g(a.$slots,"title",{},()=>[P(p(e.title),1)])],2)):m("",!0),g(a.$slots,"badge",{},()=>[e.badge?(n(),$(ee,z({key:0,color:"primary",variant:"subtle"},typeof e.badge=="string"?{label:e.badge}:e.badge,{class:s.value.badge({class:l.ui?.badge})}),null,16,["class"])):m("",!0)])],2),e.description||o.description?(n(),d("div",{key:0,class:u(s.value.description({class:l.ui?.description}))},[g(a.$slots,"description",{},()=>[P(p(e.description),1)])],2)):m("",!0),e.orientation==="vertical"?(n(),$(b(k),{key:1})):m("",!0),h.value?.length||o.features?(n(),d("ul",{key:2,class:u(s.value.features({class:l.ui?.features}))},[g(a.$slots,"features",{},()=>[(n(!0),d(U,null,E(h.value,(y,f)=>(n(),d("li",{key:f,class:u(s.value.feature({class:l.ui?.feature}))},[i(L,{name:y.icon||b(w).ui.icons.success,class:u(s.value.featureIcon({class:l.ui?.featureIcon}))},null,8,["name","class"]),t("span",{class:u(s.value.featureTitle({class:l.ui?.featureTitle}))},p(y.title),3)],2))),128))])],2)):m("",!0)])],2),e.terms||o.terms||e.button||o.button||e.orientation==="horizontal"||e.tagline||o.tagline||o.footer?(n(),d("div",{key:1,class:u(s.value.footer({class:l.ui?.footer}))},[g(a.$slots,"footer",{},()=>[e.tagline||o.tagline?(n(),d("div",{key:0,class:u(s.value.tagline({class:l.ui?.tagline}))},[g(a.$slots,"tagline",{},()=>[P(p(e.tagline),1)])],2)):m("",!0),e.orientation==="horizontal"?(n(),$(b(k),{key:1})):m("",!0),g(a.$slots,"button",{},()=>[e.button?(n(),$(_,z({key:0},{block:!0,size:"lg",...e.button},{class:s.value.button({class:l.ui?.button}),onClick:e.button?.onClick}),null,16,["class","onClick"])):m("",!0)]),e.terms||o.terms?(n(),d("div",{key:2,class:u(s.value.terms({class:l.ui?.terms}))},[g(a.$slots,"terms",{},()=>[P(p(e.terms),1)])],2)):m("",!0)])],2)):m("",!0)]),_:3},16,["as","data-orientation","class"])],64))}});function oe(e){const{$apiFetch:l}=G();return l("/api/wallets/buy-readits",{method:"POST",credentials:"include",body:{selectedPack:e}})}function ne(e){return e.replace(/\b\w/g,l=>l.toUpperCase())}const re={class:"flex flex-col gap-2 mx-3"},ce={class:"flex"},ue={class:"text-lg"},de={class:"flex"},fe={class:"flex items-center gap-1"},me={class:"text-lg font-semibold text-accent"},ge={class:"flex"},pe={class:"text-lg font-semibold"},be={class:"flex justify-end gap-2 mt-3"},xe=W({__name:"ConfirmReaditsPurchaseModal",props:{isOpenConfirmPurchaseModal:{type:Boolean},selectedPack:{}},emits:["update:openConfirmPurchaseModal"],setup(e,{emit:l}){const o=e,w=l,v=T({get:()=>o.isOpenConfirmPurchaseModal,set:f=>{w("update:openConfirmPurchaseModal",f)}}),k={starter:[100,200],popular:[150,600],pro:[350,1e3],ultra:[750,5e3]},s=S(!1),h=J(),a=O(),{paymentSuccess:c}=A(a.userId);I(()=>c.value,f=>{f&&h.add({title:"Payment Successful",description:`You received ${f} readits!`,color:"success"}),c.value=null});const y=async()=>{s.value=!0;const{invoiceUrl:f}=await oe(o.selectedPack);window.open(f,"_blank"),h.add({title:"Payment in progress",description:"A new tab has opened for payment. Return here after completing it.",color:"neutral"}),v.value=!1,s.value=!1};return(f,r)=>{const q=N,C=te,B=_,M=le;return n(),$(M,{open:b(v),"onUpdate:open":r[2]||(r[2]=j=>Q(v)?v.value=j:null)},{header:x(()=>[...r[3]||(r[3]=[t("h2",{class:"text-3xl font-semibold"},"Confirm purchase?",-1)])]),body:x(()=>[t("div",re,[r[9]||(r[9]=t("h2",{class:"font-bold text-2xl mb-1"},"Purchase Details",-1)),t("div",ce,[r[4]||(r[4]=t("p",{class:"flex-1 text-lg"},"Pack Type:",-1)),t("p",ue,p(b(ne)(o.selectedPack))+" Pack",1)]),t("div",de,[r[5]||(r[5]=t("p",{class:"flex-1 text-lg"},"You will gain:",-1)),t("div",fe,[i(q,{name:"fluent:book-coins-20-regular",class:"w-5 h-5 text-accent"}),t("span",me,p(k[o.selectedPack]?.[1]),1)])]),i(C,{color:"primary",size:"sm",class:"w-full"}),t("div",ge,[r[6]||(r[6]=t("p",{class:"flex-1 text-lg font-semibold"},"Total Price:",-1)),t("p",pe,"₱"+p(k[o.selectedPack]?.[0]),1)]),t("div",be,[i(B,{color:"error",class:"cursor-pointer",onClick:r[0]||(r[0]=j=>(v.value=!1,s.value=!1))},{default:x(()=>[...r[7]||(r[7]=[P("Cancel",-1)])]),_:1}),i(B,{class:"cursor-pointer",disabled:b(s),loading:b(s),onClick:r[1]||(r[1]=j=>y())},{default:x(()=>[...r[8]||(r[8]=[P("Confirm",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"])}}}),ve=Object.assign(xe,{__name:"ConfirmReaditsPurchaseModal"}),ye={class:"h-auto w-full overflow-hidden bg-background text-base mb-15"},he={key:0,class:"w-full flex flex-col items-center gap-10 mt-10"},we={class:"w-full max-w-[1364px]"},ke={class:"flex-1 flex flex-col items-center justify-center gap-5"},Pe={class:"flex gap-5"},Ce={class:"flex gap-5"},$e={key:1,class:"w-full flex flex-col items-center gap-10 mt-10"},Se={class:"flex w-full max-w-[1364px]"},Be={class:"flex justify-center max-w-[1364px] w-full"},qe={class:"flex items-center"},Me={class:"flex-1 flex flex-col gap-2"},je={class:"font-bold text-4xl"},ze={class:"flex-1 flex flex-col items-center justify-center gap-5"},Te={class:"flex gap-5"},Re={class:"flex items-center w-full py-2 gap-1"},Ue={class:"flex items-center w-full py-2 gap-1"},_e={class:"flex gap-5"},We={class:"flex items-center w-full py-2 gap-1"},Oe={class:"flex items-center w-full py-2 gap-1"},He=W({__name:"buy-readits",setup(e){const l=O(),{paymentSuccess:o}=A(l.userId),w=S(0),v=S(!0),k=S(!1),s=S(""),h=a=>{s.value=a,k.value=!0};return I(()=>o.value,a=>{a!=null&&(w.value=w.value+a)}),H(async()=>{v.value=!0;const a=await se();w.value=a.currentWalletBalance??0,v.value=!1}),(a,c)=>{const y=V,f=N,r=K,q=X,C=ie,B=ve;return n(),d("div",ye,[b(v)?(n(),d("div",he,[t("div",we,[i(y,{class:"w-37 h-6"})]),i(y,{class:"h-39 max-w-[1364px] w-full"}),t("div",ke,[t("div",Pe,[i(y,{class:"w-2xl h-60"}),i(y,{class:"w-2xl h-60"})]),t("div",Ce,[i(y,{class:"w-2xl h-60"}),i(y,{class:"w-2xl h-60"})])])])):(n(),d("div",$e,[t("div",Se,[i(r,{to:"/browse",class:"flex gap-2 cursor-pointer"},{default:x(()=>[i(f,{name:"material-symbols:arrow-back-rounded",class:"w-5 h-5"}),c[1]||(c[1]=t("span",null,"Back to Browse",-1))]),_:1})]),t("div",Be,[i(q,{class:"w-full bg-surface"},{default:x(()=>[t("div",qe,[t("div",Me,[c[2]||(c[2]=t("h2",{class:"font-semibold text-lg"},"Current Balance",-1)),t("h1",je,p(b(w))+" Readits",1),c[3]||(c[3]=t("p",null,"Each book requires Readits to rent/buy.",-1))]),i(f,{name:"fluent:book-coins-20-regular",class:"w-25 h-25 text-accent"})])]),_:1})]),t("div",ze,[t("div",Te,[i(C,{title:"Starter Pack",description:"Perfect for casual readers who want a small boost of credits.",price:"₱150",discount:"₱100","billing-cycle":"/one-time",button:{label:"Buy now",onClick:()=>h("starter")},orientation:"horizontal",variant:"outline",class:"max-w-2xl max-h-60 bg-surface",ui:{features:"!flex !mt-6 w-full",button:"cursor-pointer bg-inverted hover:bg-inverted hover:opacity-80 active:bg-inverted active:opacity-80"}},{features:x(()=>[t("div",Re,[i(f,{name:"fluent:book-coins-20-regular",class:"w-10 h-10 text-accent relative -left-2"}),c[4]||(c[4]=t("span",{class:"text-2xl font-semibold text-accent relative -left-2"},"200 readits",-1))])]),_:1},8,["button"]),i(C,{title:"Popular Pack",description:"Great for regular readers who enjoy renting books more often.",badge:{label:"Most popular",variant:"solid"},price:"₱200",discount:"₱150","billing-cycle":"/one-time",button:{label:"Buy now",onClick:()=>h("popular")},orientation:"horizontal",variant:"outline",class:"max-w-2xl max-h-60 bg-surface border-3 border-blue-500",ui:{features:"!flex !mt-6 w-full",button:"cursor-pointer bg-blue-500 hover:bg-blue-400 active:bg-blue-400",badge:"bg-blue-500"}},{features:x(()=>[t("div",Ue,[i(f,{name:"fluent:book-coins-20-regular",class:"w-10 h-10 text-accent relative -left-2"}),c[5]||(c[5]=t("span",{class:"text-2xl font-semibold text-accent relative -left-2"},"600 readits",-1))])]),_:1},8,["button"])]),t("div",_e,[i(C,{title:"Pro Pack",description:"Ideal for committed book lovers who read week after week.",price:"₱400",discount:"₱350","billing-cycle":"/one-time",button:{label:"Buy now",onClick:()=>h("pro")},orientation:"horizontal",variant:"outline",class:"max-w-2xl max-h-60 bg-surface",ui:{features:"!flex !mt-6 w-full",button:"cursor-pointer bg-inverted hover:bg-inverted hover:opacity-80 active:bg-inverted active:opacity-80"}},{features:x(()=>[t("div",We,[i(f,{name:"fluent:book-coins-20-regular",class:"w-10 h-10 text-accent relative -left-2"}),c[6]||(c[6]=t("span",{class:"text-2xl font-semibold text-accent relative -left-2"},"1000 readits",-1))])]),_:1},8,["button"]),i(C,{title:"Ultra Pack",description:"Designed for power readers who never want to run out of Readits.",badge:{label:"Best value",variant:"solid"},price:"₱850",discount:"₱750","billing-cycle":"/one-time",button:{label:"Buy now",onClick:()=>h("ultra")},orientation:"horizontal",variant:"outline",class:"max-w-2xl max-h-60 bg-surface border-3 border-orange-500",ui:{features:"!flex !mt-6 w-full",button:"cursor-pointer bg-orange-500 hover:bg-orange-400 active:bg-orange-400",badge:"bg-orange-500"}},{features:x(()=>[t("div",Oe,[i(f,{name:"fluent:book-coins-20-regular",class:"w-10 h-10 text-accent relative -left-2"}),c[7]||(c[7]=t("span",{class:"text-2xl font-semibold text-accent relative -left-2"},"5000 readits",-1))])]),_:1},8,["button"])])]),i(B,{"is-open-confirm-purchase-modal":b(k),"selected-pack":b(s),"onUpdate:openConfirmPurchaseModal":c[0]||(c[0]=M=>k.value=M)},null,8,["is-open-confirm-purchase-modal","selected-pack"])]))])}}});export{He as default};
