import{j as v,h as b,o as a,_ as k,w as $,a as e,t as r,b as c,k as S,n as C,A as B,c as i,i as h,Q as q,F as y,J as w,q as R,az as T,f as L,C as U,d as P}from"#entry";import{_ as j}from"./JAi2wY28.js";import{u as A,a as N}from"./CHCiICDL.js";import"./BYnHXhte.js";import"./QkSgYxCE.js";import"./DJUnOCSR.js";import"./kRIii9yh.js";const I={class:"bg-surface rounded-lg border border-base p-6 hover:shadow-md transition-shadow"},M={class:"flex justify-between items-start mb-4"},z={class:"flex-1"},D={class:"text-xl font-bold text-foreground mb-2"},O={class:"flex items-center gap-4 text-sm text-muted"},E={class:"flex items-center gap-1"},V={class:"flex items-center gap-3"},F={class:"flex items-center gap-1"},J={class:"text-accent text-xl font-bold"},Q={class:"mt-6"},G=v({__name:"PurchaseCard",props:{purchase:{}},setup(t){const o=(s,n)=>s==="completed"&&n?{label:"Transfer Decision",color:"bg-purple-500"}:{pending:{label:"Pending Approval",color:"bg-yellow-500"},approved:{label:"Confirmed",color:"bg-blue-500"},awaiting_pickup_confirmation:{label:"Pickup Arranged",color:"bg-orange-500"},completed:{label:"Purchase Complete",color:"bg-green-500"},rate_user:{label:"Rate Seller",color:"bg-amber-500"}}[s]||{label:s,color:"bg-gray-500"},g=s=>[{title:"Requested",description:"Purchase request sent",icon:"i-lucide-send"},{title:"Confirmed",description:"Seller approved request",icon:"i-lucide-check-circle"},{title:"Pickup",description:"Ready for pickup",icon:"i-lucide-package"},{title:"Transfer",description:"Ownership transfer",icon:"i-lucide-refresh-cw"},{title:"Completed",description:"Purchase finished",icon:"i-lucide-circle-check"},{title:"Rate",description:"Rate the experience",icon:"i-lucide-star"}],d=(s,n)=>s==="completed"&&n?3:{pending:0,approved:1,awaiting_pickup_confirmation:2,completed:4}[s]??0;return(s,n)=>{const u=S,m=j,l=k;return a(),b(l,{to:{path:`/purchases/${t.purchase.purchase_id}`,query:{from:"purchase"}},class:"block"},{default:$(()=>[e("div",I,[e("div",M,[e("div",z,[e("h3",D,r(t.purchase.title),1),e("div",O,[e("div",E,[c(u,{name:"lucide:user",class:"w-4 h-4"}),e("span",null,"Buying from "+r(t.purchase.from),1)])])]),e("div",V,[e("span",{class:C([o(t.purchase.purchase_status,t.purchase.transfer_decision_pending).color,"text-white px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap"])},r(o(t.purchase.purchase_status,t.purchase.transfer_decision_pending).label),3),e("div",F,[n[0]||(n[0]=e("span",{class:"text-accent text-xl font-bold"},"-",-1)),c(u,{name:"fluent:book-coins-20-regular",class:"w-6 h-6 text-accent"}),e("span",J,r(t.purchase.cost),1)])])]),e("div",Q,[c(m,{disabled:"",items:g(t.purchase.purchase_status),"model-value":d(t.purchase.purchase_status,t.purchase.transfer_decision_pending)},null,8,["items","model-value"])])])]),_:1},8,["to"])}}}),H=Object.assign(G,{__name:"PurchaseCard"}),K={class:"bg-surface rounded-lg border border-base p-6 hover:shadow-md transition-shadow"},W={class:"flex justify-between items-start mb-4"},X={class:"flex-1"},Y={class:"text-xl font-bold text-foreground mb-2"},Z={class:"flex items-center gap-4 text-sm text-muted"},ee={class:"flex items-center gap-1"},te={class:"flex items-center gap-3"},se={class:"flex items-center gap-1"},ae={class:"text-accent text-xl font-bold"},oe={class:"mt-6"},ce=v({__name:"SaleCard",props:{sale:{}},setup(t){const o=s=>({pending:{label:"Pending Approval",color:"bg-yellow-500"},approved:{label:"Confirmed",color:"bg-blue-500"},awaiting_pickup_confirmation:{label:"Pickup Arranged",color:"bg-orange-500"},completed:{label:"Sale Complete",color:"bg-green-500"},rate_user:{label:"Rate Buyer",color:"bg-amber-500"}})[s]||{label:s,color:"bg-gray-500"},g=s=>[{title:"Pending",description:"Purchase request received",icon:"i-lucide-send"},{title:"Confirmed",description:"Approved request",icon:"i-lucide-check-circle"},{title:"Delivered",description:"Book Delivered",icon:"i-lucide-package"},{title:"Completed",description:"Sale finished",icon:"i-lucide-circle-check"},{title:"Rate",description:"Rate the experience",icon:"i-lucide-star"}],d=s=>({pending:0,approved:1,awaiting_pickup_confirmation:2,completed:3})[s]??0;return(s,n)=>{const u=S,m=j,l=k;return a(),b(l,{to:{path:`/purchases/${t.sale.purchase_id}`,query:{from:"sale"}},class:"block"},{default:$(()=>[e("div",K,[e("div",W,[e("div",X,[e("h3",Y,r(t.sale.title),1),e("div",Z,[e("div",ee,[c(u,{name:"lucide:user",class:"w-4 h-4"}),e("span",null,"Selling to "+r(t.sale.to),1)])])]),e("div",te,[e("span",{class:C([o(t.sale.purchase_status).color,"text-white px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap"])},r(o(t.sale.purchase_status).label),3),e("div",se,[n[0]||(n[0]=e("span",{class:"text-accent text-xl font-bold"},"+",-1)),c(u,{name:"fluent:book-coins-20-regular",class:"w-6 h-6 text-accent"}),e("span",ae,r(t.sale.cost),1)])])]),e("div",oe,[c(m,{disabled:"",items:g(t.sale.purchase_status),"model-value":d(t.sale.purchase_status)},null,8,["items","model-value"])])])]),_:1},8,["to"])}}}),ne=Object.assign(ce,{__name:"SaleCard"}),ie={class:"w-full bg-background mb-6"},le={key:0},re={key:0,class:"bg-surface rounded-lg p-6 w-full border border-base"},de={class:"flex justify-center items-center"},ue={class:"text-center"},pe={key:1,class:"bg-surface rounded-lg p-6 w-full border border-base"},me={class:"flex justify-center items-center"},_e={class:"text-center"},he={class:"text-red-500 mt-4 text-lg"},ge={key:2,class:"bg-surface rounded-lg p-6 w-full border border-base"},fe={class:"flex justify-center items-center"},xe={class:"text-center"},be={key:3,class:"space-y-4"},ve={key:1},ye={key:0,class:"bg-surface rounded-lg p-6 w-full border border-base"},we={class:"flex justify-center items-center"},ke={class:"text-center"},$e={key:1,class:"bg-surface rounded-lg p-6 w-full border border-base"},Se={class:"flex justify-center items-center"},Ce={class:"text-center"},Pe={class:"text-red-500 mt-4 text-lg"},je={key:2,class:"bg-surface rounded-lg p-6 w-full border border-base"},Be={class:"flex justify-center items-center"},qe={class:"text-center"},Re={key:3,class:"space-y-4"},Te=v({__name:"PurchasesSection",props:{activeTab:{}},setup(t){const{purchases:o,loading:g,error:d,fetchUserPurchases:s}=A(),{sales:n,loading:u,error:m,fetchUserSales:l}=N();return B(()=>{s(),l()}),(x,_)=>{const p=q;return a(),i("div",ie,[t.activeTab==="selling"?(a(),i("div",le,[h(u)?(a(),i("div",re,[e("div",de,[e("div",ue,[c(p,{name:"lucide:loader-2",class:"w-8 h-8 text-muted mx-auto animate-spin"}),_[0]||(_[0]=e("p",{class:"text-muted mt-4 text-lg"},"Loading your sales...",-1))])])])):h(m)?(a(),i("div",pe,[e("div",me,[e("div",_e,[c(p,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),e("p",he,r(h(m)),1)])])])):h(n).length===0?(a(),i("div",ge,[e("div",fe,[e("div",xe,[c(p,{name:"bytesize:book",class:"w-16 h-16 text-muted mx-auto"}),_[1]||(_[1]=e("p",{class:"text-muted mt-4 text-lg"},"No active sales",-1))])])])):(a(),i("div",be,[(a(!0),i(y,null,w(h(n),f=>(a(),b(ne,{key:f.purchase_id,sale:f},null,8,["sale"]))),128))]))])):(a(),i("div",ve,[h(g)?(a(),i("div",ye,[e("div",we,[e("div",ke,[c(p,{name:"lucide:loader-2",class:"w-8 h-8 text-muted mx-auto animate-spin"}),_[2]||(_[2]=e("p",{class:"text-muted mt-4 text-lg"},"Loading your purchases...",-1))])])])):h(d)?(a(),i("div",$e,[e("div",Se,[e("div",Ce,[c(p,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),e("p",Pe,r(h(d)),1)])])])):h(o).length===0?(a(),i("div",je,[e("div",Be,[e("div",qe,[c(p,{name:"bytesize:book",class:"w-16 h-16 text-muted mx-auto"}),_[3]||(_[3]=e("p",{class:"text-muted mt-4 text-lg"},"No active purchases",-1))])])])):(a(),i("div",Re,[(a(!0),i(y,null,w(h(o),f=>(a(),b(H,{key:f.purchase_id,purchase:f},null,8,["purchase"]))),128))]))]))])}}}),Le=Object.assign(Te,{__name:"PurchasesSection"}),Ue={class:"flex flex-col min-h-screen w-full pt-4 px-4 md:px-8 lg:px-15"},Ae={class:"mb-6 flex justify-between items-start px-10 pt-5"},Ne={class:"text-base"},Ie={class:"font-bold text-3xl flex items-center gap-2 mb-1"},Me={class:"w-full bg-background"},ze={class:"mx-auto"},De={class:"grid grid-cols-2 gap-3 mb-6"},Oe=["onClick"],Ee={class:"flex items-center justify-center gap-1"},Ve={class:"text-sm leading-tight"},Fe={class:"flex justify-between items-center mb-6"},Je={class:"text-xl font-bold text-foreground"},Ze=v({__name:"index",setup(t){const o=R("selling"),d=T().query.activeTab;d&&!Array.isArray(d)&&(d==="selling"||d==="buying")&&(o.value=d);const s=[{id:"selling",label:"Books I'm Selling",icon:"lucide:trending-up"},{id:"buying",label:"Books Buy Request",icon:"lucide:trending-down"}],n=L(()=>o.value==="selling"?"Sell Status":"Buy Status"),u=m=>{const l=new URL(window.location.href);l.searchParams.set("activeTab",m),window.history.replaceState({},"",l.toString())};return u(o.value),U(o,m=>{u(m)}),(m,l)=>{const x=S,_=k;return a(),i("div",Ue,[e("div",Ae,[e("div",Ne,[e("h1",Ie,[c(x,{name:"fluent:calendar-24-regular",class:"w-8 h-8 text-orange-500"}),l[0]||(l[0]=P(" My Purchases ",-1))]),l[1]||(l[1]=e("p",{class:"text-muted"},"Manage your purchasing and selling activities",-1))])]),e("div",Me,[e("div",ze,[e("div",De,[(a(),i(y,null,w(s,p=>e("button",{key:p.id,class:C(["px-4 py-3 rounded-lg font-medium transition-all text-center cursor-pointer",o.value===p.id?"bg-accent text-white":"bg-surface text-foreground hover:bg-surface-hover"]),onClick:f=>o.value=p.id},[e("div",Ee,[c(x,{name:p.icon},null,8,["name"]),e("span",Ve,r(p.label),1)])],10,Oe)),64))])])]),e("div",Fe,[e("h2",Je,r(n.value),1),c(_,{to:{path:"/purchases/history",query:{activeTab:o.value}},class:"text-foreground font-medium flex items-center gap-1 cursor-pointer"},{default:$(()=>[P(r(o.value==="selling"?"Sale":"Purchase")+" history ",1),c(x,{name:"lucide:move-right",class:"w-6 h-6 text-foreground"})]),_:1},8,["to"])]),c(Le,{"active-tab":o.value},null,8,["active-tab"])])}}});export{Ze as default};
