import{q as i,ai as _,f as s}from"#entry";const y="http://127.0.0.1:8080",C=()=>{const l=i([]),n=i(!0),a=i(null),{$apiFetch:o}=_(),p=async()=>{n.value=!0,a.value=null;try{const e=await o(`${y}/api/rentals/my-rentals`,{credentials:"include"});l.value=Array.isArray(e)?e:[]}catch(e){l.value=[],console.log("No rentals found or error fetching rentals:",e)}finally{n.value=!1}},d=async e=>{n.value=!0,a.value=null;try{const t=await o(`${y}/api/rentals/completed-rental/${e}`,{credentials:"include"});l.value=[t]}catch(t){l.value=[],console.log("Completed rental not found or error fetching completed rental:",t)}finally{n.value=!1}},f=async(e,t,g,c)=>{n.value=!0,a.value=null;try{const r=await o(`${y}/api/rentals/my-completed-rentals`,{credentials:"include",query:{sortBy:e,sortOrder:t,cardsPerPage:g,pageNumber:c}});l.value=Array.isArray(r)?r:[],console.log(l.value)}catch(r){l.value=[],console.log("No rentals found or error fetching rentals:",r)}finally{n.value=!1}},u=s(()=>e=>({pending:{label:"Requested",color:"bg-yellow-500",progress:1},approved:{label:"Confirmed",color:"bg-blue-500",progress:2},awaiting_pickup_confirmation:{label:"Ready for Pickup",color:"bg-orange-500",progress:3},ongoing:{label:"Renting",color:"bg-purple-500",progress:4},awaiting_return_confirmation:{label:"Ready for Return",color:"bg-indigo-500",progress:5},completed:{label:"Completed",color:"bg-green-500",progress:6}})[e]||{label:e,color:"bg-gray-500",progress:0}),v=s(()=>e=>{const t=u.value(e.rent_status).progress;return[{label:"Requested",status:"pending"},{label:"Confirmed",status:"approved"},{label:"Pickup",status:"awaiting_pickup_confirmation"},{label:"Renting",status:"ongoing"},{label:"Return",status:"awaiting_return_confirmation"},{label:"Completed",status:"completed"}].map((c,r)=>({...c,completed:r+1<t,active:r+1===t}))}),m=s(()=>e=>e?l.value.filter(t=>t.rent_status===e):l.value),b=s(()=>l.value.length>0);return{rentals:l,loading:n,error:a,fetchUserRentals:p,fetchUserCompletedRental:d,fetchUserCompletedRentals:f,statusBadge:u,progressSteps:v,filteredRentals:m,hasActiveRentals:b}},h="http://127.0.0.1:8080",w=()=>{const l=i([]),n=i(!0),a=i(null),{$apiFetch:o}=_(),p=async()=>{n.value=!0,a.value=null;try{const e=await o(`${h}/api/rentals/my-lendings`,{credentials:"include"});l.value=Array.isArray(e)?e:[]}catch(e){l.value=[],console.log("No lendings found or error fetching lendings:",e)}finally{n.value=!1}},d=async e=>{n.value=!0,a.value=null;try{const t=await o(`${h}/api/rentals/completed-lending/${e}`,{credentials:"include"});l.value=[t]}catch(t){l.value=[],console.log("Completed lending not found or error fetching completed lending:",t)}finally{n.value=!1}},f=async(e,t,g,c)=>{n.value=!0,a.value=null;try{const r=await o(`${h}/api/rentals/my-completed-lendings`,{credentials:"include",query:{sortBy:e,sortOrder:t,cardsPerPage:g,pageNumber:c}});l.value=Array.isArray(r)?r:[]}catch(r){l.value=[],console.log("No lendings found or error fetching lendings:",r)}finally{n.value=!1}},u=s(()=>e=>({pending:{label:"Requested",color:"bg-yellow-500",progress:1},approved:{label:"Confirmed",color:"bg-blue-500",progress:2},awaiting_pickup_confirmation:{label:"Ready for Pickup",color:"bg-orange-500",progress:3},ongoing:{label:"Renting",color:"bg-purple-500",progress:4},awaiting_return_confirmation:{label:"Ready for Return",color:"bg-indigo-500",progress:5},completed:{label:"Completed",color:"bg-green-500",progress:6}})[e]||{label:e,color:"bg-gray-500",progress:0}),v=s(()=>e=>{const t=u.value(e.rent_status).progress;return[{label:"Pending",status:"pending"},{label:"Confirmed",status:"approved"},{label:"Delivered",status:"awaiting_pickup_confirmation"},{label:"Active",status:"ongoing"},{label:"Pickup",status:"awaiting_return_confirmation"},{label:"Completed",status:"completed"}].map((c,r)=>({...c,completed:r+1<t,active:r+1===t}))}),m=s(()=>e=>e?l.value.filter(t=>t.rent_status===e):l.value),b=s(()=>l.value.length>0);return{lendings:l,loading:n,error:a,fetchUserLendings:p,fetchUserCompletedLending:d,fetchUserCompletedLendings:f,statusBadge:u,progressSteps:v,filteredLendings:m,hasActiveLendings:b}};export{w as a,C as u};
