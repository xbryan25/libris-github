import{_ as q}from"./CQQG8Akn.js";import{j as D,z as N,q as P,f as S,c as f,o as u,a as d,b as t,k as j,t as h,B as w,l as G,i as a,w as m,h as _,F as R,_ as z,d as k}from"#entry";import{_ as E}from"./CoCDlcmg.js";import{_ as O}from"./CBf3hF8c.js";import{_ as H,a as M}from"./CJgwwgom.js";import{u as I,_ as W}from"./B5arrEhJ.js";function J(e,c){const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=/^.{8,}$/,s=/^\s*$/,n=[];return c==="login"&&(!e.emailAddress||s.test(e.emailAddress)?n.push({name:"emailAddress",message:"Email address is required."}):e.emailAddress&&!o.test(e.emailAddress)&&n.push({name:"emailAddress",message:"Wrong email address format."}),!e.password||s.test(e.password)?n.push({name:"password",message:"Password is required."}):e.password&&!l.test(e.password)&&n.push({name:"password",message:"Passwords should be at least 8 characters long."})),c==="signup"&&(!e.username||s.test(e.username)?n.push({name:"username",message:"Username is required."}):e.username&&e.username.length<3?n.push({name:"username",message:"Username must be at least 3 characters long."}):e.username&&e.username.length>64&&n.push({name:"username",message:"Username must not exceed 64 characters."}),!e.emailAddress||s.test(e.emailAddress)?n.push({name:"emailAddress",message:"Email address is required."}):e.emailAddress&&!o.test(e.emailAddress)&&n.push({name:"emailAddress",message:"Wrong email address format."}),!e.password||s.test(e.password)?n.push({name:"password",message:"Password is required."}):e.password&&!l.test(e.password)?n.push({name:"password",message:"Passwords should be at least 8 characters long."}):e.password&&e.password.length>64&&n.push({name:"password",message:"Password must not exceed 64 characters."}),!e.confirmPassword||s.test(e.confirmPassword)?n.push({name:"confirmPassword",message:"Confirm password is required."}):e.password!==e.confirmPassword&&n.push({name:"confirmPassword",message:"Passwords do not match."})),n}function ge(e,c){const o=/^\s*$/,l=[];return c&&(!e||o.test(e)?l.push({name:"username",message:"Username is required."}):e&&e.length<3?l.push({name:"username",message:"Username must be at least 3 characters long."}):e&&e.length>64&&l.push({name:"username",message:"Username must not exceed 64 characters."})),l}const K={class:"flex flex-col gap-10 box-border px-[10%] pb-[10%] max-w-2xl w-full"},Q={class:"mr-auto"},X={class:"flex gap-3"},Y={class:"flex flex-col gap-1"},Z={class:"text-3xl font-bold"},ee={class:"w-100 flex flex-col gap-5"},se={key:0,class:"flex flex-col gap-5"},ae={key:0,class:"mt-2 text-sm text-red-500 dark:text-red-400 flex items-start gap-1"},oe={key:2,class:"w-full"},ne={class:"flex gap-1"},ie={class:"text-sm"},te={key:0,class:"text-sm text-violet-700 dark:text-violet-500 opacity-50 cursor-not-allowed"},re=D({__name:"AuthForm",props:{authType:{},isDisabled:{type:Boolean},isLoading:{type:Boolean},isLoadingGoogle:{type:Boolean}},emits:["onSubmitLogin","onSubmitSignup","onSubmitGoogleLogin"],setup(e,{emit:c}){const o=e,l=c,s=N({emailAddress:"",password:"",username:"",confirmPassword:""}),n=P(!1),g=P(!1),{validatePassword:T}=I(),v=S(()=>o.authType!=="signup"||!s.password?{valid:!1,errors:[],strength:"weak",percentage:0}:T(s.password,s.username,s.emailAddress)),V=S(()=>o.authType!=="signup"?!0:s.username.length>=3&&s.emailAddress.length>0&&s.password.length>=8&&v.value.valid&&s.confirmPassword===s.password),U=async p=>{if(o.authType==="signup"&&!v.value.valid){console.log("[AUTH FORM] Signup blocked - password validation failed");return}o.authType==="login"?l("onSubmitLogin",p.data.emailAddress,p.data.password):o.authType==="signup"&&l("onSubmitSignup",p.data.username,p.data.emailAddress,p.data.password)};return(p,i)=>{const $=q,A=j,b=G,F=E,x=O,y=M,C=W,L=z,B=H;return u(),f("div",K,[d("div",Q,[t($)]),d("div",X,[t(A,{name:"icons:logo",class:"w-12 h-12"}),i[8]||(i[8]=d("h1",{class:"text-5xl font-extrabold"},"Libris",-1))]),d("div",Y,[d("h2",Z,h(e.authType==="login"?"Login":"Sign Up"),1),d("h3",null,h(e.authType==="login"?"Open the door to endless reading --- your next book awaits.":"Create your account and start your reading journey today."),1)]),d("div",ee,[e.authType==="login"?(u(),f("div",se,[t(b,{icon:"logos:google-icon",label:"Login with Google",class:"justify-center bg-default border border-accented text-default cursor-pointer h-9 text-md font-bold hover:bg-muted active:bg-muted disabled:bg-elevated gap-3",disabled:o.isDisabled,loading:o.isLoadingGoogle,onClick:i[0]||(i[0]=r=>l("onSubmitGoogleLogin"))},null,8,["disabled","loading"]),t(F,{color:"primary",size:"sm",label:"or"})])):w("",!0),t(B,{validate:r=>("validateAuthForm"in p?p.validateAuthForm:a(J))(r,o.authType),state:a(s),class:"space-y-4",onSubmit:i[7]||(i[7]=r=>U(r))},{default:m(()=>[e.authType==="signup"?(u(),_(y,{key:0,label:"Username",name:"username"},{default:m(()=>[t(x,{modelValue:a(s).username,"onUpdate:modelValue":i[1]||(i[1]=r=>a(s).username=r),class:"w-100",disabled:o.isLoading},null,8,["modelValue","disabled"])]),_:1})):w("",!0),t(y,{label:"Email Address",name:"emailAddress"},{default:m(()=>[t(x,{modelValue:a(s).emailAddress,"onUpdate:modelValue":i[2]||(i[2]=r=>a(s).emailAddress=r),class:"w-100",disabled:o.isLoading},null,8,["modelValue","disabled"])]),_:1}),t(y,{label:"Password",name:"password"},{default:m(()=>[t(x,{modelValue:a(s).password,"onUpdate:modelValue":i[4]||(i[4]=r=>a(s).password=r),type:a(n)?"text":"password",class:"w-100",disabled:o.isLoading,ui:{trailing:"pe-1"}},{trailing:m(()=>[t(b,{color:"neutral",variant:"link",size:"sm",icon:a(n)?"heroicons:eye-slash":"heroicons:eye","aria-label":a(n)?"Hide password":"Show password","aria-pressed":a(n),disabled:o.isLoading,onClick:i[3]||(i[3]=r=>n.value=!a(n))},null,8,["icon","aria-label","aria-pressed","disabled"])]),_:1},8,["modelValue","type","disabled"]),e.authType==="signup"?(u(),f(R,{key:0},[t(C,{password:a(s).password,"show-errors":!1},null,8,["password"]),a(s).password.length>=8&&!a(v).valid?(u(),f("div",ae,[t(A,{name:"heroicons:exclamation-circle-solid",class:"w-5 h-5 flex-shrink-0"}),i[9]||(i[9]=d("span",null,"One special character, number and uppercase letter needed",-1))])):w("",!0)],64)):w("",!0)]),_:1}),e.authType==="signup"?(u(),_(y,{key:1,label:"Confirm Password",name:"confirmPassword"},{default:m(()=>[t(x,{modelValue:a(s).confirmPassword,"onUpdate:modelValue":i[6]||(i[6]=r=>a(s).confirmPassword=r),type:a(g)?"text":"password",class:"w-100",disabled:o.isLoading,ui:{trailing:"pe-1"}},{trailing:m(()=>[t(b,{color:"neutral",variant:"link",size:"sm",icon:a(g)?"heroicons:eye-slash":"heroicons:eye","aria-label":a(g)?"Hide password":"Show password","aria-pressed":a(g),disabled:o.isLoading,onClick:i[5]||(i[5]=r=>g.value=!a(g))},null,8,["icon","aria-label","aria-pressed","disabled"])]),_:1},8,["modelValue","type","disabled"])]),_:1})):w("",!0),e.authType==="login"?(u(),f("div",oe,[t(L,{disabled:!e.isLoading,to:"/forgot-password",class:"text-sm inline-block text-violet-700 dark:text-violet-500 hover:text-violet-800 dark:hover:text-violet-400 cursor-pointer transition-colors"},{default:m(()=>[...i[10]||(i[10]=[k(" Forgot your password? ",-1)])]),_:1},8,["disabled"])])):w("",!0),t(b,{type:"submit",class:"w-100 h-9 cursor-pointer justify-center text-lg font-bold",disabled:o.isDisabled||e.authType==="signup"&&!a(V),loading:o.isLoading},{default:m(()=>[k(h(o.isLoading?e.authType==="login"?"Logging in...":"Please wait...":e.authType==="login"?"Login":"Sign Up"),1)]),_:1},8,["disabled","loading"]),d("div",ne,[d("p",ie,h(e.authType==="login"?"Don't have an account?":"Already have an account?"),1),e.isDisabled?(u(),f("span",te,h(e.authType==="login"?"Sign Up":"Login"),1)):(u(),_(L,{key:1,to:e.authType==="login"?"/signup":"/login",class:"text-sm text-violet-700 dark:text-violet-500 cursor-pointer hover:text-violet-800 dark:hover:text-violet-400 transition-colors"},{default:m(()=>[k(h(e.authType==="login"?"Sign Up":"Login"),1)]),_:1},8,["to"]))])]),_:1},8,["validate","state"])])])}}}),fe=Object.assign(re,{__name:"AuthForm"});export{fe as _,ge as v};
