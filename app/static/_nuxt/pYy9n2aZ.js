import{r as l,aN as b,D as n}from"#entry";const v="http://127.0.0.1:8080",d=()=>{const t=l(null),a=l(!0),r=l(null),{$apiFetch:u}=b(),i=async e=>{a.value=!0,r.value=null;try{const o=await u(`${v}/api/books/${e}`,{credentials:"include"});t.value=o}catch(o){throw r.value=o?.message||"Failed to fetch book details",o}finally{a.value=!1}},c=n(()=>{if(!t.value)return[];const e=[];return(t.value.availability==="rent"||t.value.availability==="both")&&e.push({label:"For Rent",color:"blue"}),(t.value.availability==="purchase"||t.value.availability==="both")&&e.push({label:"For Sale",color:"red"}),e}),s=n(()=>{if(!t.value)return{text:"Unknown",color:"bg-zinc-500"};const e=t.value.owner_trust_score;return e>=951?{text:"Perfect",color:"bg-[#15803D]"}:e>=751?{text:"Exceptional",color:"bg-[#22C55E]"}:e>=500?{text:"Good",color:"bg-[#84CC16]"}:e>=251?{text:"Decent",color:"bg-[#FACC15]"}:e>=51?{text:"Bad",color:"bg-[#CA8A04]"}:{text:"Poor",color:"bg-[#000000]"}});return{book:t,loading:a,error:r,fetchBookDetails:i,availabilityBadges:c,ownerTrustBadge:s}};export{d as u};
