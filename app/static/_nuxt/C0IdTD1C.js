import{q as u,ai as D,j as k,A as $,c as l,o as r,B as y,i as e,a as t,b as s,k as j,F as R,J as w,n as C,t as h,az as U,w as A,_ as E,d as F}from"#entry";import{_ as q,a as z,b as G}from"./dR15ss7J.js";import{u as T,a as H}from"./C6ghEBgg.js";import"./1-KUFzXD.js";import"./BCnsrY_Q.js";import"./B7NIlbhz.js";import"./BDYeLtO0.js";import"./QkSgYxCE.js";import"./DNBF-Q6I.js";const J="http://127.0.0.1:8080",M=()=>{const p=u(!1),m=u(null),{$apiFetch:_}=D();return{loading:p,error:m,getCompletedRentalRatings:async g=>{p.value=!0,m.value=null;try{const o=await _(`${J}/api/ratings/rental/${g}`,{credentials:"include"});return{givenRating:o.given_rating,givenComment:o.given_comment,receivedRating:o.received_rating,receivedComment:o.received_comment}}catch(o){return console.error("Error fetching ratings:",o),null}finally{p.value=!1}}}},O={class:"space-y-6"},P={key:0,class:"bg-surface rounded-lg border border-base p-8 flex gap-10"},S={class:"flex-1"},K={class:"text-center mb-3"},Q={class:"flex justify-center gap-2"},W={class:"flex justify-center items-center gap-3"},X={key:0,class:"mt-5 p-5 bg-background rounded-xl"},Y={class:"text-justify"},Z={class:"flex-1"},ee={class:"text-center mb-3"},te={class:"flex justify-center gap-2"},ne={class:"flex justify-center items-center gap-3"},se={key:0,class:"mt-5 p-5 bg-background rounded-xl"},ae={class:"text-justify"},oe=k({__name:"RentalViewRatingCard",props:{rentalId:{}},setup(p){const m=p,{getCompletedRentalRatings:_,loading:a}=M(),g=u(0),o=u(""),x=u(0),f=u("");return $(async()=>{const n=await _(m.rentalId);n&&(g.value=n.givenRating,o.value=n.givenComment,x.value=n.receivedRating,f.value=n.receivedComment),console.log(n)}),(n,i)=>{const c=j;return r(),l("div",O,[e(a)?y("",!0):(r(),l("div",P,[t("div",S,[t("div",K,[t("div",Q,[s(c,{name:"lucide:star",class:"w-16 h-16 text-amber-500 mb-4"}),s(c,{name:"lucide:arrow-big-up",class:"w-16 h-16 text-amber-500 mb-4"})]),i[0]||(i[0]=t("h2",{class:"text-2xl font-bold mb-2"},"Rating Given",-1))]),t("div",null,[t("div",W,[(r(),l(R,null,w([1,2,3,4,5],d=>s(c,{key:d,name:"lucide:star",class:C(["w-14 h-14 transition-all duration-200",d<=e(g)?"text-amber-400 fill-amber-400":"text-gray-300"])},null,8,["class"])),64))])]),e(o)!==""?(r(),l("div",X,[t("p",Y,h(e(o)),1)])):y("",!0)]),t("div",Z,[t("div",ee,[t("div",te,[s(c,{name:"lucide:star",class:"w-16 h-16 text-amber-500 mb-4"}),s(c,{name:"lucide:arrow-big-down",class:"w-16 h-16 text-amber-500 mb-4"})]),i[1]||(i[1]=t("h2",{class:"text-2xl font-bold mb-2"},"Rating Received",-1))]),t("div",null,[t("div",ne,[(r(),l(R,null,w([1,2,3,4,5],d=>s(c,{key:d,name:"lucide:star",class:C(["w-14 h-14 transition-all duration-200",d<=e(x)?"text-amber-400 fill-amber-400":"text-gray-300"])},null,8,["class"])),64))])]),e(f)!==""?(r(),l("div",se,[t("p",ae,h(e(f)),1)])):y("",!0)])]))])}}}),le=Object.assign(oe,{__name:"RentalViewRatingCard"}),re={class:"min-h-screen w-full pt-4 pb-6 px-4 md:px-8 lg:px-15"},ie={class:"mb-6"},ce={class:"font-bold text-3xl flex items-center gap-2 mb-1"},de={key:0,class:"bg-surface rounded-lg border border-base p-12"},ue={class:"flex justify-center items-center"},me={class:"text-center"},_e={key:1,class:"bg-surface rounded-lg border border-base p-12"},pe={class:"flex justify-center items-center"},ge={class:"text-center"},fe={key:2,class:"space-y-6"},$e=k({__name:"[rentalId]",setup(p){const m=U(),_=m.params.rentalId,a=m.query.from,{rentals:g,fetchUserCompletedRental:o}=T(),{lendings:x,fetchUserCompletedLending:f}=H(),n=u(null),i=u(!0),c=async()=>{i.value=!0,console.log("reach here");try{a==="rental"?(await o(_),n.value=g.value[0]??null):a==="lending"&&(await f(_),n.value=x.value[0]??null)}catch(d){console.error("Error fetching rental data:",d)}finally{i.value=!1}console.log(n.value)};return $(()=>{c()}),(d,v)=>{const b=j,I=E,L=q,V=z,B=G,N=le;return r(),l("div",re,[t("div",ie,[s(I,{to:`/rentals/history?activeTab=${e(a)==="rental"?"renting":"lending"}`,class:"flex items-center gap-2 text-base pt-4 pb-4 hover:text-foreground mb-4 cursor-pointer"},{default:A(()=>[s(b,{name:"lucide:arrow-left",class:"w-5 h-5"}),t("span",null,"Back to "+h(e(a)==="rental"?"Rentals":"Lendings")+" History",1)]),_:1},8,["to"]),t("h1",ce,[s(b,{name:e(a)==="rental"?"lucide:trending-down":"lucide:trending-up",class:"w-8 h-8 text-orange-500"},null,8,["name"]),F(" "+h(e(a)==="rental"?"Rental Details":"Lending Details"),1)])]),e(i)?(r(),l("div",de,[t("div",ue,[t("div",me,[s(b,{name:"lucide:loader-2",class:"w-12 h-12 text-muted mx-auto animate-spin"}),v[0]||(v[0]=t("p",{class:"text-muted mt-4 text-lg"},"Loading details...",-1))])])])):e(n)?(r(),l("div",fe,[s(L,{item:e(n),from:e(a),"is-completed":!0},null,8,["item","from"]),s(V,{item:e(n),from:e(a)},null,8,["item","from"]),s(B,{cost:e(n).cost,"all-fees-captured":e(n).all_fees_captured,from:e(a),"actual-deposit":e(n).actual_deposit,"actual-rate":e(n).actual_rate,"rental-duration-days":e(n).rental_duration_days},null,8,["cost","all-fees-captured","from","actual-deposit","actual-rate","rental-duration-days"]),s(N,{from:e(a),item:e(n),"rental-id":e(_)},null,8,["from","item","rental-id"])])):(r(),l("div",_e,[t("div",pe,[t("div",ge,[s(b,{name:"lucide:alert-circle",class:"w-16 h-16 text-red-500 mx-auto"}),v[1]||(v[1]=t("p",{class:"text-red-500 mt-4 text-lg"},"Rental not found",-1))])])]))])}}});export{$e as default};
